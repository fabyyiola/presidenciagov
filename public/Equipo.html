<!-- EquipoMunicipal.html (Public module) -->
<section id="EquipoMunicipal" class="font-sans bg-white">
  <!-- Hero -->
  <section class="relative text-white select-none" id="EquipoHero">
    <div class="relative h-[42vh] md:h-[60vh] lg:h-[72vh] overflow-hidden">
      <!-- Slides (JS will inject here) -->
      <div id="equipo-slides" class="absolute inset-0 w-full h-full"></div>

      <!-- Dark overlay -->
      <div class="absolute inset-0 bg-black/50"></div>

      <!-- Content -->
      <div
        class="relative z-10 h-full flex items-center justify-start text-center px-6"
      >
        <div class="pl-10">
          <h1
            class="text-3xl md:text-5xl font-extrabold leading-tight drop-shadow"
          >
            Conoce a tu <span class="text-green-200">Gobierno Municipal</span>
          </h1>
          <p
            class="mt-3 md:mt-4 text-base md:text-xl text-blue-100 leading-relaxed"
          >
            Alcald√≠a, Cabildo, Secretar√≠as y Direcciones trabajando con
            transparencia y servicio.
          </p>
        </div>
      </div>

      <!-- Controls -->
      <button
        type="button"
        aria-label="Anterior"
        class="hidden md:flex absolute left-3 top-1/2 -translate-y-1/2 z-10 w-10 h-10 rounded-full bg-white/70 hover:bg-white shadow items-center justify-center"
      >
        <i class="fas fa-chevron-left text-blue-700"></i>
      </button>
      <button
        type="button"
        aria-label="Siguiente"
        class="hidden md:flex absolute right-3 top-1/2 -translate-y-1/2 z-10 w-10 h-10 rounded-full bg-white/70 hover:bg-white shadow items-center justify-center"
      >
        <i class="fas fa-chevron-right text-blue-700"></i>
      </button>

      <!-- Dots -->
      <div
        class="absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex gap-2"
      ></div>
    </div>
  </section>

  <!-- Presidencia -->
  <section class="py-16 bg-white">
    <div class="max-w-5xl mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold text-municipal-blue mb-8">
        Presidencia Municipal
      </h2>
      <div
        class="max-w-3xl mx-auto bg-gradient-to-r from-municipal-blue to-blue-600 rounded-2xl p-8 text-white animate-fade-in"
      >
        <div class="flex flex-col md:flex-row items-center gap-6">
          <div
            class="w-32 h-32 bg-white rounded-full flex items-center justify-center text-5xl text-municipal-blue"
          >
            üë®‚Äçüíº
          </div>
          <div class="text-center md:text-left">
            <h3 class="text-2xl font-bold mb-2">
              LIC. Daniel Omar Gonzalez Garza
            </h3>
            <p class="text-lg text-blue-200 mb-4">Presidente Municipal</p>
            <p class="text-blue-100 leading-relaxed">
              Comprometido con el desarrollo integral de nuestro municipio,
              trabajando d√≠a a d√≠a para mejorar la calidad de vida de todos los
              ciudadanos de Sabinas Hidalgo.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Secretar√≠as -->
  <section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-3xl font-bold text-municipal-blue text-center mb-12">
        Secretar√≠as
      </h2>
      <div
        id="public-secretarias"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
      ></div>
    </div>
  </section>

  <!-- Direcciones -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-3xl font-bold text-municipal-blue text-center mb-12">
        Direcciones
      </h2>
      <div
        id="public-direcciones"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
      ></div>
    </div>
  </section>

  <!-- Cabildo -->
  <section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-3xl font-bold text-municipal-blue text-center mb-12">
        Cabildo Municipal
      </h2>
      <div
        id="public-cabildo"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
      ></div>
    </div>
  </section>
</section>
<script>
(function () {
  // ‚úÖ Easy-to-edit array of images
  const equipoImages = [
    { url: "https://scontent.fntr8-1.fna.fbcdn.net/v/t39.30808-6/520437805_1078194844488738_4955549635772773157_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeF6AZ-YmiaGy1noQpAALgwWhvxLpjSHc76G_EumNIdzviKkgdDBud1PRQsEFVVt0W3dW8_W9EGgRfjnOVhC3OcZ&_nc_ohc=i6rrRAPS5-EQ7kNvwGnFhGG&_nc_oc=AdlCphKCL-a1Z6QjoKl1sxDSbTXD-x8BxWt5hw0yIhdpZFKeXHXSIWKDwOVBXKCwVz7AbiPAWdo4X3yZPvUFI2IJ&_nc_zt=23&_nc_ht=scontent.fntr8-1.fna&_nc_gid=-7gbD8Lck1anXOLiBnLY8g&oh=00_AfaUiifRyFWPVUueYoQrNcfjoajuBlDYISBbihaRjHesjQ&oe=68C6B73D", alt: "Secretar√≠as y Direcciones" },
    { url: "https://scontent.fntr8-1.fna.fbcdn.net/v/t39.30808-6/534201554_1078194884488734_8131719880880222781_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_eui2=AeHJxpsmDZR-AGEOtuDnnRRrs4DRAJE0ZtazgNEAkTRm1uMGKEcv9XT0SpXoZY3V_k8Oza67qwXHt883cPhhv08r&_nc_ohc=l0yT3cXSH9UQ7kNvwEywlDR&_nc_oc=AdkaGrY8MWsfwTr9Iya-N1mw7UqizDW4iCePiydznWcMrvNs29O9u6zacgShgSvQdjwRMmPuNOWcpe5D0mue8Lay&_nc_zt=23&_nc_ht=scontent.fntr8-1.fna&_nc_gid=KBA_OOf0L1Uc0g5S3Vg7-A&oh=00_AfbTZ4IVM-FMDbC3cVMdCFUCnOv_mwqgNl6P9OwzjCQaBg&oe=68C6E487", alt: "Sesi√≥n de Cabildo" }
    
  ];

  const root = document.getElementById('EquipoHero');
  if (!root) return;

  const slidesContainer = root.querySelector('#equipo-slides');
  const dotsWrap = root.querySelector('div.absolute.bottom-4');
  const prevBtn = root.querySelector('button[aria-label="Anterior"]');
  const nextBtn = root.querySelector('button[aria-label="Siguiente"]');

  // Build slides
  equipoImages.forEach((img, i) => {
    const slide = document.createElement('div');
    slide.className = `absolute inset-0 ${i === 0 ? "opacity-100" : "opacity-0"} transition-opacity duration-1000`;
    slide.innerHTML = `<img src="${img.url}" alt="${img.alt}" class="w-full h-full object-cover" />`;
    slidesContainer.appendChild(slide);
  });

  const slides = Array.from(slidesContainer.children);

  // Build dots
  const dots = equipoImages.map((_, i) => {
    const b = document.createElement('button');
    b.className = 'w-2.5 h-2.5 rounded-full bg-white/60 hover:bg-white ring-2 ring-white/40 transition transform';
    b.setAttribute('aria-label', 'Ir al slide ' + (i + 1));
    b.addEventListener('click', () => goTo(i, true));
    dotsWrap.appendChild(b);
    return b;
  });

  let idx = 0, timer = null;
  const intervalMs = 5000;

  function render() {
    slides.forEach((s, i) => {
      s.style.opacity = i === idx ? '1' : '0';
    });
    dots.forEach((d, i) => {
      d.classList.toggle('bg-white', i === idx);
      d.classList.toggle('bg-white/60', i !== idx);
      d.classList.toggle('scale-110', i === idx);
    });
  }

  function goTo(i, manual = false) {
    idx = (i + slides.length) % slides.length;
    render();
    if (manual) restart();
  }
  function next() { goTo(idx + 1); }
  function prev() { goTo(idx - 1); }

  function start() { stop(); timer = setInterval(next, intervalMs); }
  function stop() { if (timer) clearInterval(timer); timer = null; }
  function restart() { stop(); start(); }

  // Events
  nextBtn?.addEventListener('click', () => goTo(idx + 1, true));
  prevBtn?.addEventListener('click', () => goTo(idx - 1, true));

  root.addEventListener('mouseenter', stop);
  root.addEventListener('mouseleave', start);

  // Swipe (mobile)
  let touchX = null;
  root.addEventListener('touchstart', e => { touchX = e.touches[0].clientX; }, {passive:true});
  root.addEventListener('touchend', e => {
    if (touchX === null) return;
    const dx = e.changedTouches[0].clientX - touchX;
    if (Math.abs(dx) > 40) dx < 0 ? next() : prev();
    touchX = null;
  });

  // Init
  render();
  start();
})();
</script>

<script>
  (() => {
    const fmtCard = (it, color = "blue") => `
    <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition duration-300 animate-fade-in">
      <div class="text-center mb-4">
        <div class="w-16 h-16 bg-${color}-100 text-${color}-600 rounded-full flex items-center justify-center text-2xl mx-auto mb-4">
          <i class="${it.icono || "fas fa-user"}"></i>
        </div>
        <h3 class="font-bold text-municipal-blue text-lg">${it.nombre}</h3>
        ${
          it.titulo
            ? `<p class="text-municipal-teal font-semibold">${it.titulo}</p>`
            : ""
        }
      </div>
      <p class="text-gray-600 text-sm mb-3">${it.descripcion || ""}</p>
      <div class="text-sm text-gray-500 space-y-1">
        ${
          it.responsable
            ? `<p><i class="fas fa-user mr-2"></i>${it.responsable}</p>`
            : ""
        }
        ${
          it.telefono
            ? `<p><i class="fas fa-phone mr-2"></i>${it.telefono}</p>`
            : ""
        }
        ${
          it.email
            ? `<p><i class="fas fa-envelope mr-2"></i>${it.email}</p>`
            : ""
        }
        ${
          it.partido
            ? `<p><i class="fas fa-flag mr-2"></i>${it.partido}</p>`
            : ""
        }
      </div>
    </div>`;

    function renderPublic() {
      const secretarias = JSON.parse(
        localStorage.getItem("secretarias") || "[]"
      );
      const direcciones = JSON.parse(
        localStorage.getItem("direcciones") || "[]"
      );
      const cabildo = JSON.parse(localStorage.getItem("cabildo") || "[]");

      document.getElementById("public-secretarias").innerHTML = secretarias
        .map((it) => fmtCard(it, "blue"))
        .join("");
      document.getElementById("public-direcciones").innerHTML = direcciones
        .map((it) => fmtCard(it, "green"))
        .join("");
      document.getElementById("public-cabildo").innerHTML = cabildo
        .map((it) => fmtCard(it, "purple"))
        .join("");
    }

    if (document.readyState === "loading")
      document.addEventListener("DOMContentLoaded", renderPublic);
    else renderPublic();
  })();
</script>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in {
    animation: fade-in 0.7s ease-out;
  }
</style>
