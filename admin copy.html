<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administración Municipal - Sabinas Hidalgo, N.L.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'gov-blue': '#1e40af',
                        'gov-green': '#059669',
                        'gov-gray': '#6b7280',
                        'gov-light': '#f8fafc'
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar-transition {
            transition: all 0.3s ease;
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .modal-backdrop {
            backdrop-filter: blur(4px);
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gov-light font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 fixed w-full top-0 z-40">
        <div class="flex items-center justify-between px-6 py-4">
            <div class="flex items-center">
                <button id="sidebarToggle" class="lg:hidden mr-4 text-gov-gray hover:text-gov-blue transition duration-200">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <div class="flex items-center">
                    <div class="bg-gradient-to-r from-gov-blue to-gov-green text-white p-2 rounded-lg mr-3">
                        <i class="fas fa-city text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">Administración Municipal</h1>
                        <p class="text-sm text-gov-gray">Sabinas Hidalgo, Nuevo León</p>
                    </div>
                </div>
            </div>
            
            <div class="flex items-center space-x-4">
                <button class="text-gov-gray hover:text-gov-blue transition duration-200">
                    <i class="fas fa-bell text-lg"></i>
                </button>
                <div class="flex items-center space-x-2">
                    <div class="text-right">
                        <p class="text-sm font-medium text-gray-800">Admin Usuario</p>
                        <p class="text-xs text-gov-gray">Administrador</p>
                    </div>
                    <div class="w-8 h-8 bg-gov-blue rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar" class="fixed left-0 top-16 h-full w-64 bg-white shadow-lg transform -translate-x-full lg:translate-x-0 sidebar-transition z-30">
        <nav class="p-6">
            <ul class="space-y-2">
                <!-- CORE MENU ITEMS -->
                <li>
                    <a href="#" onclick="showSection('dashboard')" class="nav-link flex items-center p-3 rounded-lg text-gov-gray hover:bg-gov-blue hover:text-white transition duration-200 active">
                        <i class="fas fa-tachometer-alt mr-3"></i>
                        Dashboard
                    </a>
                </li>
                
                <!-- EQUIPO PARENT MENU -->
                <li>
                    <div class="menu-parent">
                        <button onclick="toggleSubmenu('equipo')" class="nav-parent flex items-center justify-between w-full p-3 rounded-lg text-gov-gray hover:bg-gray-100 transition duration-200">
                            <div class="flex items-center">
                                <i class="fas fa-users-cog mr-3"></i>
                                Equipo
                            </div>
                            <i id="equipo-arrow" class="fas fa-chevron-right transition-transform duration-200"></i>
                        </button>
                        <ul id="equipo-submenu" class="ml-6 mt-2 space-y-1 hidden">
                            <li>
                                <a href="#" onclick="showSection('secretarias')" class="nav-link flex items-center p-2 pl-4 rounded-lg text-gov-gray hover:bg-gov-blue hover:text-white transition duration-200 text-sm">
                                    <i class="fas fa-building mr-3 text-xs"></i>
                                    Secretarías
                                </a>
                            </li>
                            <li>
                                <a href="#" onclick="showSection('direcciones')" class="nav-link flex items-center p-2 pl-4 rounded-lg text-gov-gray hover:bg-gov-blue hover:text-white transition duration-200 text-sm">
                                    <i class="fas fa-sitemap mr-3 text-xs"></i>
                                    Direcciones
                                </a>
                            </li>
                            <li>
                                <a href="#" onclick="showSection('cabildo')" class="nav-link flex items-center p-2 pl-4 rounded-lg text-gov-gray hover:bg-gov-blue hover:text-white transition duration-200 text-sm">
                                    <i class="fas fa-users mr-3 text-xs"></i>
                                    Cabildo Municipal
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                
                <li>
                    <a href="#" onclick="showSection('negocios')" class="nav-link flex items-center p-3 rounded-lg text-gov-gray hover:bg-gov-blue hover:text-white transition duration-200">
                        <i class="fas fa-store mr-3"></i>
                        Negocios Registrados
                    </a>
                </li>
                
                <li>
                    <a href="#" onclick="showSection('lugares')" class="nav-link flex items-center p-3 rounded-lg text-gov-gray hover:bg-gov-blue hover:text-white transition duration-200">
                        <i class="fas fa-map-marked-alt mr-3"></i>
                        Lugares Turísticos
                    </a>
                </li>
                
                <li>
                    <a href="#" onclick="showSection('eventos')" class="nav-link flex items-center p-3 rounded-lg text-gov-gray hover:bg-gov-blue hover:text-white transition duration-200">
                        <i class="fas fa-calendar-alt mr-3"></i>
                        Eventos
                    </a>
                </li>
                
                <li>
                    <a href="#" onclick="showSection('tramites')" class="nav-link flex items-center p-3 rounded-lg text-gov-gray hover:bg-gov-blue hover:text-white transition duration-200">
                        <i class="fas fa-file-alt mr-3"></i>
                        Trámites
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="lg:ml-64 pt-16 min-h-screen">
        <!-- Dashboard Section -->
        <section id="dashboard-section" class="section-content p-6">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Dashboard Económico Municipal</h2>
                <p class="text-gov-gray">Monitoreo del crecimiento y impacto de negocios locales</p>
            </div>

            <!-- Main KPI Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-gray-800" id="total-businesses-count">0</p>
                            <p class="text-gov-gray">Negocios Registrados</p>
                            <p class="text-xs text-green-600 mt-1" id="business-growth">+0% este mes</p>
                        </div>
                        <div class="bg-gov-blue bg-opacity-10 p-3 rounded-lg">
                            <i class="fas fa-store text-gov-blue text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-gray-800" id="new-businesses-month">0</p>
                            <p class="text-gov-gray">Nuevos este Mes</p>
                            <p class="text-xs text-blue-600 mt-1" id="monthly-trend">Últimos 30 días</p>
                        </div>
                        <div class="bg-gov-green bg-opacity-10 p-3 rounded-lg">
                            <i class="fas fa-plus-circle text-gov-green text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-gray-800" id="weekend-businesses">0</p>
                            <p class="text-gov-gray">Abiertos Fin de Semana</p>
                            <p class="text-xs text-purple-600 mt-1" id="weekend-percentage">0% del total</p>
                        </div>
                        <div class="bg-purple-600 bg-opacity-10 p-3 rounded-lg">
                            <i class="fas fa-calendar-weekend text-purple-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-gray-800" id="digital-businesses">0</p>
                            <p class="text-gov-gray">Con Servicios Digitales</p>
                            <p class="text-xs text-orange-600 mt-1" id="digital-percentage">0% del total</p>
                        </div>
                        <div class="bg-orange-500 bg-opacity-10 p-3 rounded-lg">
                            <i class="fas fa-wifi text-orange-500 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row 1 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Category Distribution -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold text-gray-800">Distribución por Categoría</h3>
                        <button onclick="toggleChartView('category')" class="text-sm text-gov-blue hover:text-blue-700">
                            <i class="fas fa-chart-pie mr-1"></i>
                            Cambiar vista
                        </button>
                    </div>
                    <div id="category-chart" class="space-y-4">
                        <!-- Category bars will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Monthly Registration Trend -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Tendencia de Registros Mensuales</h3>
                    <div id="monthly-trend-chart" class="space-y-3">
                        <!-- Monthly trend will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Charts Row 2 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Top Subcategories -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Subcategorías Más Comunes</h3>
                    <div id="subcategory-chart" class="space-y-3">
                        <!-- Subcategory data will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Business Distribution by Area -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Distribución por Zona</h3>
                    <div id="area-distribution" class="space-y-3">
                        <!-- Area distribution will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Service Indicators -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- General Services -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Indicadores de Servicios Generales</h3>
                    <div id="services-indicators" class="space-y-4">
                        <!-- Service indicators will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Schedule Coverage -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Cobertura de Horarios</h3>
                    <div id="schedule-coverage" class="space-y-4">
                        <!-- Schedule coverage will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Recent Business Activity -->
            <div class="bg-white rounded-xl shadow-sm p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold text-gray-800">Negocios Registrados Recientemente</h3>
                    <span class="text-sm text-gov-gray">Últimos 30 días</span>
                </div>
                <div id="recent-businesses" class="space-y-4">
                    <!-- Recent businesses will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Secretarías Section -->
        <section id="secretarias-section" class="section-content p-6 hidden">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Secretarías</h2>
                    <p class="text-gov-gray">Gestión de las secretarías municipales</p>
                </div>
                <button onclick="openModal('secretarias')" class="bg-gov-blue text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200 flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    Agregar Secretaría
                </button>
            </div>

            <div id="secretarias-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Secretarías cards will be populated by JavaScript -->
            </div>
        </section>

        <!-- Direcciones Section -->
        <section id="direcciones-section" class="section-content p-6 hidden">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Direcciones</h2>
                    <p class="text-gov-gray">Gestión de las direcciones municipales</p>
                </div>
                <button onclick="openModal('direcciones')" class="bg-gov-green text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200 flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    Agregar Dirección
                </button>
            </div>

            <div id="direcciones-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Direcciones cards will be populated by JavaScript -->
            </div>
        </section>

        <!-- Cabildo Section -->
        <section id="cabildo-section" class="section-content p-6 hidden">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Cabildo Municipal</h2>
                    <p class="text-gov-gray">Gestión de los miembros del cabildo</p>
                </div>
                <button onclick="openModal('cabildo')" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    Agregar Miembro
                </button>
            </div>

            <div id="cabildo-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Cabildo cards will be populated by JavaScript -->
            </div>
        </section>

        <!-- Tourist Places Section -->
        <section id="lugares-section" class="section-content p-6 hidden">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Lugares Turísticos</h2>
                    <p class="text-gov-gray">Gestión de lugares turísticos y atractivos locales</p>
                </div>
                <button onclick="openModal('lugares')" class="bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition duration-200 flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    Agregar Lugar Turístico
                </button>
            </div>

            <div id="lugares-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Tourist places cards will be populated by JavaScript -->
            </div>
        </section>

        <!-- Events Section -->
        <section id="eventos-section" class="section-content p-6 hidden">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Eventos</h2>
                    <p class="text-gov-gray">Gestión de eventos municipales y comunitarios</p>
                </div>
                <button onclick="openModal('eventos')" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition duration-200 flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    Agregar Evento
                </button>
            </div>

            <!-- Filters -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4">Filtros</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Categoría</label>
                        <select id="filter-categoria" onchange="filterEvents()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="">Todas las categorías</option>
                            <option value="cultural">Cultural</option>
                            <option value="deportivo">Deportivo</option>
                            <option value="religioso">Religioso</option>
                            <option value="gastronomico">Gastronómico</option>
                            <option value="educativo">Educativo</option>
                            <option value="familiar">Familiar</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Organizador</label>
                        <select id="filter-organizador" onchange="filterEvents()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="">Todos los organizadores</option>
                            <option value="Dirección de Cultura">Dirección de Cultura</option>
                            <option value="Desarrollo Económico">Desarrollo Económico</option>
                            <option value="Secretaría de Desarrollo Social">Secretaría de Desarrollo Social</option>
                            <option value="Dirección de Deportes">Dirección de Deportes</option>
                            <option value="Parroquia San José">Parroquia San José</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Mes</label>
                        <select id="filter-mes" onchange="filterEvents()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="">Todos los meses</option>
                            <option value="0">Enero</option>
                            <option value="1">Febrero</option>
                            <option value="2">Marzo</option>
                            <option value="3">Abril</option>
                            <option value="4">Mayo</option>
                            <option value="5">Junio</option>
                            <option value="6">Julio</option>
                            <option value="7">Agosto</option>
                            <option value="8">Septiembre</option>
                            <option value="9">Octubre</option>
                            <option value="10">Noviembre</option>
                            <option value="11">Diciembre</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Estado</label>
                        <select id="filter-estado" onchange="filterEvents()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="">Todos</option>
                            <option value="destacado">Destacados</option>
                            <option value="proximo">Próximos</option>
                            <option value="pasado">Pasados</option>
                        </select>
                    </div>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <button onclick="clearFilters()" class="text-indigo-600 hover:text-indigo-700 text-sm font-medium">
                        <i class="fas fa-times mr-1"></i>
                        Limpiar filtros
                    </button>
                    <span id="events-count" class="text-sm text-gray-600">0 eventos encontrados</span>
                </div>
            </div>

            <!-- Events Table -->
            <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Evento</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha y Hora</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Lugar</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Organizador</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="events-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- Event rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Empty state -->
                <div id="empty-events-state" class="text-center py-12 hidden">
                    <div class="bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-calendar-alt text-gray-400 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-medium text-gray-800 mb-2">No hay eventos registrados</h3>
                    <p class="text-gov-gray">Los eventos aparecerán aquí cuando se agreguen.</p>
                </div>
            </div>
        </section>

        <!-- Trámites Section -->
        <section id="tramites-section" class="section-content p-6 hidden">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Administración de Trámites</h2>
                    <p class="text-gov-gray">Gestión de trámites y servicios municipales</p>
                </div>
                <button onclick="openModal('tramites')" class="bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition duration-200 flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    Agregar Trámite
                </button>
            </div>

            <!-- Filters -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4">Filtros</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Categoría</label>
                        <select id="filter-tramite-categoria" onchange="filterTramites()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="">Todas las categorías</option>
                            <option value="identificacion">Identificación y Documentos</option>
                            <option value="apoyos">Apoyos Económicos y Sociales</option>
                            <option value="salud">Salud</option>
                            <option value="educacion">Educación</option>
                            <option value="transito">Tránsito y Transporte</option>
                            <option value="comercio">Comercio y Negocios</option>
                            <option value="construccion">Construcción y Obras</option>
                            <option value="otros">Otros</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ubicación</label>
                        <select id="filter-tramite-ubicacion" onchange="filterTramites()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="">Todas las ubicaciones</option>
                            <option value="Presidencia Municipal">Presidencia Municipal</option>
                            <option value="DIF Municipal">DIF Municipal</option>
                            <option value="Módulo de Tránsito">Módulo de Tránsito</option>
                            <option value="Registro Civil">Registro Civil</option>
                            <option value="Catastro">Catastro</option>
                            <option value="Desarrollo Económico">Desarrollo Económico</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Costo</label>
                        <select id="filter-tramite-costo" onchange="filterTramites()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="">Todos</option>
                            <option value="gratuito">Gratuitos</option>
                            <option value="con-costo">Con costo</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Estado</label>
                        <select id="filter-tramite-estado" onchange="filterTramites()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="">Todos</option>
                            <option value="destacado">Destacados</option>
                            <option value="normal">Normales</option>
                        </select>
                    </div>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <button onclick="clearTramiteFilters()" class="text-teal-600 hover:text-teal-700 text-sm font-medium">
                        <i class="fas fa-times mr-1"></i>
                        Limpiar filtros
                    </button>
                    <span id="tramites-count" class="text-sm text-gray-600">0 trámites encontrados</span>
                </div>
            </div>

            <!-- Trámites Table -->
            <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trámite</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoría</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Costo</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tiempo</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ubicación</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tramites-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- Trámite rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Empty state -->
                <div id="empty-tramites-state" class="text-center py-12 hidden">
                    <div class="bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-file-alt text-gray-400 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-medium text-gray-800 mb-2">No hay trámites registrados</h3>
                    <p class="text-gov-gray">Los trámites aparecerán aquí cuando se agreguen.</p>
                </div>
            </div>
        </section>

        <!-- Business Registration Section -->
        <section id="negocios-section" class="section-content p-6 hidden">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Negocios Registrados</h2>
                    <p class="text-gov-gray">Administración y seguimiento de negocios locales</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="bg-white rounded-lg px-4 py-2 shadow-sm border">
                        <span class="text-sm text-gov-gray">Total de negocios:</span>
                        <span class="font-bold text-gov-blue ml-2" id="total-businesses">0</span>
                    </div>
                    <button onclick="exportBusinessData()" class="bg-gov-green text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200 flex items-center">
                        <i class="fas fa-download mr-2"></i>
                        Exportar
                    </button>
                </div>
            </div>

            <!-- Business Table -->
            <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Negocio</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Propietario</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoría</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contacto</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="business-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- Business rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Empty state -->
                <div id="empty-business-state" class="text-center py-12 hidden">
                    <div class="bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-store text-gray-400 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-medium text-gray-800 mb-2">No hay negocios registrados</h3>
                    <p class="text-gov-gray">Los negocios aparecerán aquí cuando se registren desde el portal público.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 id="modal-title" class="text-xl font-bold text-gray-800">Agregar Elemento</h3>
                    <button onclick="closeModal()" class="text-gov-gray hover:text-gray-800 transition duration-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <form id="modal-form" class="p-6">
                <div id="form-fields" class="space-y-4">
                    <!-- Form fields will be populated by JavaScript -->
                </div>
                
                <div class="flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200">
                    <button type="button" onclick="closeModal()" class="px-6 py-2 border border-gray-300 rounded-lg text-gov-gray hover:bg-gray-50 transition duration-200">
                        Cancelar
                    </button>
                    <button type="submit" id="submit-btn" class="px-6 py-2 bg-gov-blue text-white rounded-lg hover:bg-blue-700 transition duration-200">
                        Guardar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Image Viewer Modal -->
    <div id="image-viewer-modal" class="fixed inset-0 bg-black bg-opacity-90 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
            <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 id="image-viewer-title" class="text-xl font-bold text-gray-800">Galería de Imágenes</h3>
                <button onclick="closeImageViewer()" class="text-gov-gray hover:text-gray-800 transition duration-200">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6">
                <!-- Main image display -->
                <div class="mb-4">
                    <img id="main-viewer-image" src="" alt="" class="w-full h-96 object-cover rounded-lg">
                </div>
                
                <!-- Image thumbnails -->
                <div id="image-thumbnails" class="flex space-x-2 overflow-x-auto pb-2">
                    <!-- Thumbnails will be populated by JavaScript -->
                </div>
                
                <!-- Place info -->
                <div id="place-info" class="mt-6 p-4 bg-gray-50 rounded-lg">
                    <!-- Place information will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Event Detail Modal -->
    <div id="event-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 id="event-detail-title" class="text-2xl font-bold text-gray-800">Detalles del Evento</h3>
                    <button onclick="closeEventDetail()" class="text-gov-gray hover:text-gray-800 transition duration-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div id="event-detail-content" class="p-6">
                <!-- Event details will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Trámite Detail Modal -->
    <div id="tramite-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 id="tramite-detail-title" class="text-2xl font-bold text-gray-800">Detalles del Trámite</h3>
                    <button onclick="closeTramiteDetail()" class="text-gov-gray hover:text-gray-800 transition duration-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div id="tramite-detail-content" class="p-6">
                <!-- Trámite details will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full">
            <div class="p-6 text-center">
                <div class="bg-red-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">Confirmar Eliminación</h3>
                <p class="text-gov-gray mb-6">¿Estás seguro de que deseas eliminar este elemento? Esta acción no se puede deshacer.</p>
                
                <div class="flex justify-center space-x-3">
                    <button onclick="closeConfirmModal()" class="px-6 py-2 border border-gray-300 rounded-lg text-gov-gray hover:bg-gray-50 transition duration-200">
                        Cancelar
                    </button>
                    <button id="confirm-delete-btn" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-200">
                        Eliminar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // CORE SYSTEM FUNCTIONS - DON'T MODIFY
        // ==========================================
        
        // Current section tracking
        let currentSection = 'dashboard';
        let currentEditId = null;
        let currentEditType = null;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderAllSections();
            updateCounts();
            
            // Sidebar toggle for mobile
            document.getElementById('sidebarToggle').addEventListener('click', function() {
                const sidebar = document.getElementById('sidebar');
                sidebar.classList.toggle('-translate-x-full');
            });

            // Form submission
            document.getElementById('modal-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveItem();
            });
        });

        // Core navigation function - handles all section switching
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(s => s.classList.add('hidden'));
            
            // Show selected section
            const targetSection = document.getElementById(`${section}-section`);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Update navigation highlighting
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active', 'bg-gov-blue', 'text-white');
                link.classList.add('text-gov-gray');
            });
            
            // Highlight active menu item
            event.target.classList.add('active', 'bg-gov-blue', 'text-white');
            event.target.classList.remove('text-gov-gray');
            
            currentSection = section;
        }

        // Submenu toggle function
        function toggleSubmenu(menuId) {
            const submenu = document.getElementById(`${menuId}-submenu`);
            const arrow = document.getElementById(`${menuId}-arrow`);
            
            if (submenu.classList.contains('hidden')) {
                submenu.classList.remove('hidden');
                arrow.classList.add('rotate-90');
            } else {
                submenu.classList.add('hidden');
                arrow.classList.remove('rotate-90');
            }
        }

        // ==========================================
        // DATA STORAGE - ADD YOUR DATA ARRAYS HERE
        // ==========================================
        
        let secretarias = [
            {
                id: 1,
                nombre: "Secretaría del Ayuntamiento",
                responsable: "Lic. Carlos Mendoza Ruiz",
                titulo: "Secretario del Ayuntamiento",
                descripcion: "Encargada de la administración general y actas de cabildo",
                telefono: "(873) 742-0001",
                email: "secretaria@sabinashidalgo.gob.mx",
                icono: "fas fa-gavel"
            },
            {
                id: 2,
                nombre: "Secretaría de Finanzas",
                responsable: "C.P. María Elena Torres",
                titulo: "Secretaria de Finanzas",
                descripcion: "Administración de recursos financieros municipales",
                telefono: "(873) 742-0015",
                email: "finanzas@sabinashidalgo.gob.mx",
                icono: "fas fa-coins"
            },
            {
                id: 3,
                nombre: "Secretaría de Desarrollo Social",
                responsable: "Lic. Roberto Hernández",
                titulo: "Secretario de Desarrollo Social",
                descripcion: "Programas sociales y desarrollo comunitario",
                telefono: "(873) 742-0020",
                email: "desarrollo@sabinashidalgo.gob.mx",
                icono: "fas fa-heart"
            }
        ];

        let direcciones = [
            {
                id: 1,
                nombre: "Dirección de Salud",
                responsable: "Dra. Patricia Flores Vega",
                titulo: "Directora de Salud",
                descripcion: "Programas de salud pública y prevención",
                telefono: "(873) 742-0025",
                email: "salud@sabinashidalgo.gob.mx",
                icono: "fas fa-heartbeat"
            },
            {
                id: 2,
                nombre: "Dirección de Obras Públicas",
                responsable: "Ing. Miguel Ángel Sánchez",
                titulo: "Director de Obras Públicas",
                descripcion: "Infraestructura y mantenimiento urbano",
                telefono: "(873) 742-0030",
                email: "obras@sabinashidalgo.gob.mx",
                icono: "fas fa-hard-hat"
            },
            {
                id: 3,
                nombre: "Dirección de Educación y Cultura",
                responsable: "Profra. Ana Lucía Morales",
                titulo: "Directora de Educación",
                descripcion: "Programas educativos y actividades culturales",
                telefono: "(873) 742-0035",
                email: "educacion@sabinashidalgo.gob.mx",
                icono: "fas fa-graduation-cap"
            }
        ];

        let cabildo = [
            {
                id: 1,
                nombre: "Lic. José Manuel Rodríguez",
                titulo: "Primer Regidor",
                descripcion: "Comisión de Hacienda y Patrimonio",
                telefono: "(873) 742-0040",
                email: "regidor1@sabinashidalgo.gob.mx",
                partido: "Partido Acción Nacional",
                icono: "fas fa-user-tie"
            },
            {
                id: 2,
                nombre: "Lic. Carmen Beatriz López",
                titulo: "Segunda Regidora",
                descripcion: "Comisión de Desarrollo Social",
                telefono: "(873) 742-0041",
                email: "regidor2@sabinashidalgo.gob.mx",
                partido: "Movimiento Ciudadano",
                icono: "fas fa-female"
            },
            {
                id: 3,
                nombre: "Ing. Fernando Castillo Vega",
                titulo: "Tercer Regidor",
                descripcion: "Comisión de Obras Públicas",
                telefono: "(873) 742-0042",
                email: "regidor3@sabinashidalgo.gob.mx",
                partido: "Partido Revolucionario Institucional",
                icono: "fas fa-user-tie"
            }
        ];

        let eventos = [
            {
                id: 1,
                titulo: "Feria de San José",
                descripcion: "Celebración tradicional en honor al santo patrono con actividades culturales, gastronómicas y religiosas para toda la familia.",
                fecha: "2024-03-19",
                fechaFin: "2024-03-24",
                hora: "Todo el día",
                lugar: "Plaza Principal Benito Juárez",
                colonia: "Centro",
                organizador: "Parroquia San José",
                contacto: "(873) 742-0050",
                precio: "Entrada gratuita",
                categoria: "religioso",
                fotos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fff3e0'/%3E%3Cpath d='M50 250 L150 200 L250 220 L350 180 L350 300 L50 300 Z' fill='%234caf50'/%3E%3Crect x='180' y='120' width='40' height='80' fill='%238d6e63'/%3E%3Cpath d='M160 120 L200 100 L240 120 L220 130 L180 130 Z' fill='%23d32f2f'/%3E%3Ccircle cx='100' cy='180' r='25' fill='%23ffeb3b'/%3E%3Ccircle cx='300' cy='160' r='30' fill='%23ff5722'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3EFeria San José%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e8f5e8'/%3E%3Crect x='50' y='100' width='300' height='150' fill='%23ffcc02'/%3E%3Crect x='70' y='120' width='40' height='60' fill='%23333'/%3E%3Crect x='130' y='120' width='40' height='60' fill='%23333'/%3E%3Crect x='190' y='120' width='40' height='60' fill='%23333'/%3E%3Crect x='250' y='120' width='40' height='60' fill='%23333'/%3E%3Crect x='310' y='120' width='40' height='60' fill='%23333'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='12'%3EPuestos de Comida%3C/text%3E%3C/svg%3E"
                ],
                destacado: true
            },
            {
                id: 2,
                titulo: "Torneo de Fútbol Municipal",
                descripcion: "Competencia deportiva entre equipos locales con categorías juvenil y adultos. Premios para los primeros tres lugares.",
                fecha: "2024-04-15",
                fechaFin: "2024-04-28",
                hora: "16:00 hrs",
                lugar: "Campo Deportivo Municipal",
                colonia: "Deportiva",
                organizador: "Dirección de Deportes",
                contacto: "deportes@sabinashidalgo.gob.mx",
                precio: "Gratuito para espectadores",
                categoria: "deportivo",
                fotos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23c8e6c9'/%3E%3Crect x='50' y='50' width='300' height='200' fill='%234caf50'/%3E%3Cpath d='M50 50 L350 50 L350 250 L50 250 Z' stroke='%23fff' stroke-width='3' fill='none'/%3E%3Cpath d='M200 50 L200 250' stroke='%23fff' stroke-width='2'/%3E%3Ccircle cx='200' cy='150' r='30' stroke='%23fff' stroke-width='2' fill='none'/%3E%3Ccircle cx='200' cy='150' r='15' fill='%23fff'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3ETorneo de Fútbol%3C/text%3E%3C/svg%3E"
                ],
                destacado: false
            },
            {
                id: 3,
                titulo: "Festival Gastronómico",
                descripcion: "Muestra de la cocina tradicional de Sabinas Hidalgo con platillos típicos, concursos culinarios y degustaciones.",
                fecha: "2024-05-10",
                fechaFin: "2024-05-12",
                hora: "18:00 hrs",
                lugar: "Plaza Principal",
                colonia: "Centro",
                organizador: "Desarrollo Económico",
                contacto: "(873) 742-0025",
                precio: "$30 por persona",
                categoria: "gastronomico",
                fotos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fff8e1'/%3E%3Ccircle cx='150' cy='120' r='40' fill='%23ff9800'/%3E%3Ccircle cx='250' cy='120' r='40' fill='%23f44336'/%3E%3Crect x='120' y='160' width='60' height='20' fill='%238d6e63'/%3E%3Crect x='220' y='160' width='60' height='20' fill='%238d6e63'/%3E%3Cpath d='M100 200 L300 200 L280 220 L120 220 Z' fill='%23795548'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3EFestival Gastronómico%3C/text%3E%3C/svg%3E"
                ],
                destacado: true
            },
            {
                id: 4,
                titulo: "Noche Cultural",
                descripcion: "Presentaciones de danza folclórica, música tradicional y exposiciones artísticas de talentos locales.",
                fecha: "2024-02-14",
                hora: "19:00 hrs",
                lugar: "Auditorio Municipal",
                colonia: "Centro",
                organizador: "Dirección de Cultura",
                contacto: "cultura@sabinashidalgo.gob.mx",
                precio: "Entrada gratuita",
                categoria: "cultural",
                fotos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f3e5f5'/%3E%3Cpath d='M100 100 L150 80 L200 100 L250 80 L300 100 L300 200 L100 200 Z' fill='%239c27b0'/%3E%3Ccircle cx='150' cy='140' r='15' fill='%23fff'/%3E%3Ccircle cx='200' cy='140' r='15' fill='%23fff'/%3E%3Ccircle cx='250' cy='140' r='15' fill='%23fff'/%3E%3Cpath d='M120 180 L180 160 L220 180 L280 160' stroke='%23fff' stroke-width='3' fill='none'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3ENoche Cultural%3C/text%3E%3C/svg%3E"
                ],
                destacado: false
            },
            {
                id: 5,
                titulo: "Día del Niño",
                descripcion: "Celebración especial con juegos, actividades recreativas, espectáculos infantiles y regalos para los más pequeños.",
                fecha: "2024-04-30",
                hora: "10:00 hrs",
                lugar: "Parque Municipal",
                colonia: "Centro",
                organizador: "Secretaría de Desarrollo Social",
                contacto: "(873) 742-0020",
                precio: "Gratuito",
                categoria: "familiar",
                fotos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e1f5fe'/%3E%3Ccircle cx='100' cy='100' r='30' fill='%23ff5722'/%3E%3Ccircle cx='200' cy='80' r='25' fill='%23ffeb3b'/%3E%3Ccircle cx='300' cy='110' r='35' fill='%234caf50'/%3E%3Crect x='150' y='150' width='100' height='80' fill='%23ff9800'/%3E%3Cpath d='M170 170 L180 160 L190 170 L200 160 L210 170 L220 160 L230 170' stroke='%23fff' stroke-width='2' fill='none'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3EDía del Niño%3C/text%3E%3C/svg%3E"
                ],
                destacado: false
            },
            {
                id: 6,
                titulo: "Conferencia de Emprendimiento",
                descripcion: "Charlas motivacionales y talleres prácticos para fomentar el espíritu emprendedor en jóvenes y adultos.",
                fecha: "2024-06-20",
                hora: "09:00 hrs",
                lugar: "Centro de Convenciones",
                colonia: "Industrial",
                organizador: "Desarrollo Económico",
                contacto: "emprendimiento@sabinashidalgo.gob.mx",
                precio: "$100 por persona",
                categoria: "educativo",
                fotos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f5f5f5'/%3E%3Crect x='50' y='80' width='300' height='160' fill='%23fff'/%3E%3Crect x='70' y='100' width='260' height='100' fill='%23e3f2fd'/%3E%3Ccircle cx='100' cy='130' r='8' fill='%23333'/%3E%3Ccircle cx='130' cy='130' r='8' fill='%23333'/%3E%3Ccircle cx='160' cy='130' r='8' fill='%23333'/%3E%3Ccircle cx='190' cy='130' r='8' fill='%23333'/%3E%3Cpath d='M80 220 L120 200 L160 210 L200 190 L240 200 L280 180 L320 190' stroke='%232196f3' stroke-width='3' fill='none'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='12'%3EConferencia Emprendimiento%3C/text%3E%3C/svg%3E"
                ],
                destacado: true
            }
        ];

        let tramites = [
            {
                id: "1",
                titulo: "Renovación de Licencia de Conducir",
                descripcion: "Renovación de licencia de conducir vigente para vehículos particulares",
                categoria: "transito",
                categoriaNombre: "Tránsito y Transporte",
                requisitos: [
                    "Licencia anterior (original y copia)",
                    "Identificación oficial vigente (INE/IFE)",
                    "Comprobante de domicilio no mayor a 3 meses",
                    "Examen médico vigente (no mayor a 6 meses)",
                    "2 fotografías tamaño infantil a color"
                ],
                procedimiento: [
                    "Presentarse en el Módulo de Tránsito con todos los documentos",
                    "Entregar documentos en ventanilla de recepción",
                    "Realizar pago correspondiente en caja",
                    "Pasar a toma de fotografía y datos biométricos",
                    "Esperar entrega de licencia (mismo día)"
                ],
                costo: "$850",
                tiempo: "30 minutos",
                ubicacion: "Módulo de Tránsito",
                horario: "Lunes a Viernes 8:00–15:00 hrs",
                descripcionLarga: "La renovación debe realizarse antes del vencimiento de la licencia anterior. En caso de licencia vencida, se aplicarán multas adicionales según el tiempo transcurrido.",
                icono: "fas fa-id-card",
                destacado: true
            },
            {
                id: "2",
                titulo: "Solicitud de Apoyo Económico",
                descripcion: "Programa de apoyo económico para familias en situación vulnerable",
                categoria: "apoyos",
                categoriaNombre: "Apoyos Económicos y Sociales",
                requisitos: [
                    "Solicitud llena y firmada",
                    "Identificación oficial del solicitante",
                    "CURP de todos los integrantes de la familia",
                    "Comprobante de domicilio reciente",
                    "Comprobante de ingresos familiares",
                    "Estudio socioeconómico (se realiza en el DIF)"
                ],
                procedimiento: [
                    "Acudir al DIF Municipal para solicitar formato",
                    "Llenar solicitud con datos completos y reales",
                    "Entregar documentos requeridos",
                    "Agendar cita para estudio socioeconómico",
                    "Esperar resolución del comité evaluador (15 días hábiles)",
                    "En caso de aprobación, acudir a firma de convenio"
                ],
                costo: "Gratuito",
                tiempo: "15 días hábiles",
                ubicacion: "DIF Municipal",
                horario: "Lunes a Viernes 8:00–14:00 hrs",
                descripcionLarga: "El apoyo está sujeto a disponibilidad presupuestal y evaluación socioeconómica. Se priorizan familias con menores de edad, adultos mayores o personas con discapacidad.",
                icono: "fas fa-hand-holding-heart",
                destacado: true
            },
            {
                id: "3",
                titulo: "Constancia de Residencia",
                descripcion: "Documento que acredita el domicilio del solicitante en el municipio",
                categoria: "identificacion",
                categoriaNombre: "Identificación y Documentos",
                requisitos: [
                    "Identificación oficial vigente",
                    "Comprobante de domicilio no mayor a 3 meses",
                    "2 testigos con identificación oficial",
                    "Formato de solicitud (se proporciona en el lugar)"
                ],
                procedimiento: [
                    "Solicitar formato en Presidencia Municipal",
                    "Llenar formato con datos del solicitante",
                    "Presentar documentos y testigos en ventanilla",
                    "Realizar pago en caja municipal",
                    "Recoger constancia (mismo día)"
                ],
                costo: "$45",
                tiempo: "20 minutos",
                ubicacion: "Presidencia Municipal",
                horario: "Lunes a Viernes 8:00–15:00 hrs",
                descripcionLarga: "La constancia tiene validez de 3 meses a partir de su expedición. Los testigos deben ser mayores de edad y residir en el municipio.",
                icono: "fas fa-home",
                destacado: false
            },
            {
                id: "4",
                titulo: "Registro de Nacimiento",
                descripcion: "Inscripción de nacimiento en el Registro Civil Municipal",
                categoria: "identificacion",
                categoriaNombre: "Identificación y Documentos",
                requisitos: [
                    "Certificado médico de nacimiento original",
                    "Identificación oficial de ambos padres",
                    "Acta de matrimonio de los padres (si aplica)",
                    "CURP de ambos padres",
                    "Comprobante de domicilio"
                ],
                procedimiento: [
                    "Presentarse en Registro Civil dentro de los 60 días posteriores al nacimiento",
                    "Entregar documentos requeridos",
                    "Proporcionar datos para el registro",
                    "Firmar el acta de nacimiento",
                    "Solicitar copias certificadas (opcional)"
                ],
                costo: "Gratuito (primeros 60 días)",
                tiempo: "45 minutos",
                ubicacion: "Registro Civil",
                horario: "Lunes a Viernes 8:00–15:00 hrs",
                descripcionLarga: "El registro es gratuito si se realiza dentro de los primeros 60 días. Después de este período se aplicarán multas según la normatividad vigente.",
                icono: "fas fa-baby",
                destacado: true
            },
            {
                id: "5",
                titulo: "Licencia de Funcionamiento",
                descripcion: "Permiso para operar un negocio o establecimiento comercial",
                categoria: "comercio",
                categoriaNombre: "Comercio y Negocios",
                requisitos: [
                    "Solicitud de licencia llena",
                    "Identificación oficial del propietario",
                    "Comprobante de propiedad o contrato de arrendamiento",
                    "Uso de suelo compatible",
                    "Visto bueno de Protección Civil",
                    "Comprobante de pago de impuestos municipales"
                ],
                procedimiento: [
                    "Obtener formato en Desarrollo Económico",
                    "Reunir documentación requerida",
                    "Solicitar inspección de Protección Civil",
                    "Entregar expediente completo",
                    "Realizar pago de derechos",
                    "Esperar resolución (10 días hábiles)",
                    "Recoger licencia autorizada"
                ],
                costo: "$1,200 - $3,500 (según giro)",
                tiempo: "10 días hábiles",
                ubicacion: "Desarrollo Económico",
                horario: "Lunes a Viernes 8:00–14:00 hrs",
                descripcionLarga: "El costo varía según el tipo de negocio y superficie. La licencia debe renovarse anualmente. Algunos giros requieren permisos adicionales de otras dependencias.",
                icono: "fas fa-store",
                destacado: false
            },
            {
                id: "6",
                titulo: "Permiso de Construcción",
                descripcion: "Autorización para realizar obras de construcción, ampliación o remodelación",
                categoria: "construccion",
                categoriaNombre: "Construcción y Obras",
                requisitos: [
                    "Proyecto arquitectónico firmado por perito responsable",
                    "Licencia de uso de suelo",
                    "Comprobante de propiedad del terreno",
                    "Identificación oficial del propietario",
                    "Memoria de cálculo estructural (obras mayores)",
                    "Estudio de impacto ambiental (si aplica)"
                ],
                procedimiento: [
                    "Presentar proyecto en Obras Públicas",
                    "Revisión técnica del proyecto (5 días)",
                    "Corrección de observaciones (si las hay)",
                    "Pago de derechos correspondientes",
                    "Emisión del permiso",
                    "Inicio de obra con supervisión municipal"
                ],
                costo: "$15 por m² de construcción",
                tiempo: "8 días hábiles",
                ubicacion: "Dirección de Obras Públicas",
                horario: "Lunes a Viernes 8:00–14:00 hrs",
                descripcionLarga: "Las obras deben apegarse estrictamente al proyecto autorizado. Cualquier modificación requiere autorización previa. Se realizarán inspecciones periódicas durante la construcción.",
                icono: "fas fa-hard-hat",
                destacado: false
            }
        ];

        let lugaresTuristicos = [
            {
                id: 1,
                nombre: "Plaza Principal Benito Juárez",
                categoria: "Plaza y Jardines",
                descripcion: "Hermosa plaza central con arquitectura colonial, ideal para pasear en familia y disfrutar del ambiente tradicional mexicano.",
                direccion: "Centro Histórico, Sabinas Hidalgo, N.L.",
                horario: "24 horas",
                precio: "Gratuito",
                googleMaps: "https://maps.google.com/?q=Plaza+Principal+Sabinas+Hidalgo",
                recomendaciones: "Visitar por la tarde-noche cuando hay más ambiente. Los fines de semana suele haber eventos culturales.",
                imagenes: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e3f2fd'/%3E%3Cpath d='M50 250 L150 200 L250 220 L350 180 L350 300 L50 300 Z' fill='%234caf50'/%3E%3Crect x='180' y='120' width='40' height='80' fill='%238d6e63'/%3E%3Cpath d='M160 120 L200 100 L240 120 L220 130 L180 130 Z' fill='%23d32f2f'/%3E%3Ccircle cx='100' cy='180' r='25' fill='%234caf50'/%3E%3Ccircle cx='300' cy='160' r='30' fill='%234caf50'/%3E%3Cpath d='M150 50 L200 30 L250 50 L200 70 Z' fill='%23ffeb3b'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3EPlaza Principal%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fff3e0'/%3E%3Crect x='50' y='100' width='300' height='150' fill='%23ffcc02'/%3E%3Crect x='70' y='120' width='40' height='60' fill='%23333'/%3E%3Crect x='130' y='120' width='40' height='60' fill='%23333'/%3E%3Crect x='190' y='120' width='40' height='60' fill='%23333'/%3E%3Crect x='250' y='120' width='40' height='60' fill='%23333'/%3E%3Crect x='310' y='120' width='40' height='60' fill='%23333'/%3E%3Cpath d='M40 100 L200 60 L360 100 L350 110 L200 70 L50 110 Z' fill='%23d32f2f'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='12'%3EEdificios Coloniales%3C/text%3E%3C/svg%3E"
                ],
                imagenPrincipal: 0,
                icono: "fas fa-monument"
            },
            {
                id: 2,
                nombre: "Parroquia de San José",
                categoria: "Patrimonio Religioso",
                descripcion: "Iglesia histórica del siglo XVIII con hermosa arquitectura colonial y gran valor cultural para la comunidad.",
                direccion: "Calle Hidalgo s/n, Centro, Sabinas Hidalgo, N.L.",
                horario: "Lunes a Domingo: 6:00 AM - 8:00 PM",
                precio: "Gratuito",
                googleMaps: "https://maps.google.com/?q=Parroquia+San+Jose+Sabinas+Hidalgo",
                recomendaciones: "Respetar los horarios de misa. La mejor iluminación para fotos es por la mañana. Vestir apropiadamente.",
                imagenes: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e8f5e8'/%3E%3Crect x='150' y='80' width='100' height='180' fill='%23f5f5dc'/%3E%3Cpath d='M140 80 L200 50 L260 80 L250 90 L200 60 L150 90 Z' fill='%23d32f2f'/%3E%3Crect x='190' y='200' width='20' height='60' fill='%238d6e63'/%3E%3Cpath d='M195 100 L205 100 L205 120 L195 120 Z' fill='%23333'/%3E%3Ccircle cx='200' cy='110' r='8' fill='%23ffeb3b'/%3E%3Cpath d='M190 30 L200 10 L210 30 L200 40 Z' fill='%23ffeb3b'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3EParroquia San José%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fff8e1'/%3E%3Crect x='100' y='120' width='200' height='120' fill='%23f5f5dc'/%3E%3Cpath d='M80 120 L200 80 L320 120 L300 130 L200 90 L100 130 Z' fill='%23d32f2f'/%3E%3Crect x='180' y='180' width='40' height='60' fill='%238d6e63'/%3E%3Cpath d='M190 140 L210 140 L210 160 L190 160 Z' fill='%23333'/%3E%3Cpath d='M140 140 L160 140 L160 160 L140 160 Z' fill='%23333'/%3E%3Cpath d='M240 140 L260 140 L260 160 L240 160 Z' fill='%23333'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='12'%3EInterior de la Iglesia%3C/text%3E%3C/svg%3E"
                ],
                imagenPrincipal: 0,
                icono: "fas fa-church"
            },
            {
                id: 3,
                nombre: "Cerro de la Cruz",
                categoria: "Naturaleza y Senderismo",
                descripcion: "Mirador natural que ofrece vistas panorámicas de todo el municipio. Ideal para senderismo y fotografía de paisajes.",
                direccion: "Carretera a Lampazos, Sabinas Hidalgo, N.L.",
                horario: "Amanecer a atardecer (recomendado con luz natural)",
                precio: "Gratuito",
                googleMaps: "https://maps.google.com/?q=Cerro+de+la+Cruz+Sabinas+Hidalgo",
                recomendaciones: "Llevar agua y calzado cómodo. Mejor visitar temprano en la mañana o al atardecer. No recomendado en época de lluvias.",
                imagenes: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e1f5fe'/%3E%3Cpath d='M0 200 L100 150 L200 100 L300 120 L400 140 L400 300 L0 300 Z' fill='%234caf50'/%3E%3Cpath d='M150 100 L200 50 L250 100 L200 80 Z' fill='%238bc34a'/%3E%3Cpath d='M190 70 L200 50 L210 70 L200 60 Z' fill='%238d6e63'/%3E%3Cpath d='M195 60 L205 60 L205 80 L195 80 Z' fill='%238d6e63'/%3E%3Ccircle cx='80' cy='50' r='30' fill='%23ffeb3b'/%3E%3Cpath d='M50 180 L80 170 L110 180 L80 175 Z' fill='%234caf50'/%3E%3Cpath d='M250 160 L280 150 L310 160 L280 155 Z' fill='%234caf50'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3ECerro de la Cruz%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23ffecb3'/%3E%3Cpath d='M0 250 L50 200 L100 180 L150 160 L200 140 L250 150 L300 170 L350 190 L400 210 L400 300 L0 300 Z' fill='%234caf50'/%3E%3Crect x='50' y='220' width='15' height='30' fill='%238d6e63'/%3E%3Crect x='100' y='200' width='15' height='50' fill='%238d6e63'/%3E%3Crect x='150' y='180' width='15' height='70' fill='%238d6e63'/%3E%3Crect x='200' y='160' width='15' height='90' fill='%238d6e63'/%3E%3Crect x='250' y='170' width='15' height='80' fill='%238d6e63'/%3E%3Ccircle cx='350' cy='80' r='25' fill='%23ff9800'/%3E%3Ctext x='200' y='290' text-anchor='middle' fill='%23333' font-family='Arial' font-size='12'%3EVista Panorámica%3C/text%3E%3C/svg%3E"
                ],
                imagenPrincipal: 0,
                icono: "fas fa-mountain"
            },
            {
                id: 4,
                nombre: "Museo Municipal",
                categoria: "Cultura e Historia",
                descripcion: "Espacio dedicado a preservar y mostrar la historia local, con exhibiciones de artefactos históricos y cultura regional.",
                direccion: "Calle Morelos #45, Centro, Sabinas Hidalgo, N.L.",
                horario: "Martes a Domingo: 9:00 AM - 5:00 PM",
                precio: "$20 adultos, $10 niños y estudiantes",
                googleMaps: "https://maps.google.com/?q=Museo+Municipal+Sabinas+Hidalgo",
                recomendaciones: "Cerrado los lunes. Hay visitas guiadas los fines de semana. Descuentos para grupos escolares con previa cita.",
                imagenes: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f3e5f5'/%3E%3Crect x='50' y='80' width='300' height='180' fill='%23fff3e0'/%3E%3Crect x='70' y='100' width='40' height='80' fill='%23333'/%3E%3Crect x='130' y='100' width='40' height='80' fill='%23333'/%3E%3Crect x='190' y='100' width='40' height='80' fill='%23333'/%3E%3Crect x='250' y='100' width='40' height='80' fill='%23333'/%3E%3Crect x='310' y='100' width='40' height='80' fill='%23333'/%3E%3Crect x='180' y='200' width='40' height='60' fill='%238d6e63'/%3E%3Cpath d='M40 80 L200 40 L360 80 L350 90 L200 50 L50 90 Z' fill='%23795548'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3EMuseo Municipal%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fafafa'/%3E%3Crect x='50' y='50' width='80' height='60' fill='%23e0e0e0' stroke='%23333' stroke-width='2'/%3E%3Crect x='160' y='50' width='80' height='60' fill='%23e0e0e0' stroke='%23333' stroke-width='2'/%3E%3Crect x='270' y='50' width='80' height='60' fill='%23e0e0e0' stroke='%23333' stroke-width='2'/%3E%3Crect x='50' y='140' width='80' height='60' fill='%23e0e0e0' stroke='%23333' stroke-width='2'/%3E%3Crect x='160' y='140' width='80' height='60' fill='%23e0e0e0' stroke='%23333' stroke-width='2'/%3E%3Crect x='270' y='140' width='80' height='60' fill='%23e0e0e0' stroke='%23333' stroke-width='2'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='12'%3EExhibiciones Históricas%3C/text%3E%3C/svg%3E"
                ],
                imagenPrincipal: 0,
                icono: "fas fa-university"
            },
            {
                id: 5,
                nombre: "Balneario Las Adjuntas",
                categoria: "Recreación Acuática",
                descripcion: "Centro recreativo con albercas naturales y áreas verdes, perfecto para disfrutar en familia durante los días calurosos.",
                direccion: "Carretera Sabinas-Lampazos Km 8, Sabinas Hidalgo, N.L.",
                horario: "Sábados y Domingos: 9:00 AM - 6:00 PM (temporada de calor)",
                precio: "$50 adultos, $30 niños",
                googleMaps: "https://maps.google.com/?q=Balneario+Las+Adjuntas+Sabinas+Hidalgo",
                recomendaciones: "Abierto principalmente en temporada de calor (abril-septiembre). Llevar protector solar y toallas. Hay área de asadores disponible.",
                imagenes: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e0f2f1'/%3E%3Cellipse cx='200' cy='180' rx='120' ry='60' fill='%2381d4fa'/%3E%3Cpath d='M50 250 L100 230 L150 240 L200 220 L250 235 L300 225 L350 240 L400 230 L400 300 L0 300 Z' fill='%234caf50'/%3E%3Ccircle cx='100' cy='100' r='20' fill='%234caf50'/%3E%3Ccircle cx='300' cy='120' r='25' fill='%234caf50'/%3E%3Cpath d='M180 160 L220 160 L220 200 L180 200 Z' fill='%2303a9f4'/%3E%3Ccircle cx='80' cy='50' r='25' fill='%23ffeb3b'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='14'%3EBalneario Las Adjuntas%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e8f5e8'/%3E%3Crect x='50' y='150' width='300' height='100' fill='%2381d4fa'/%3E%3Cpath d='M40 150 L80 140 L120 145 L160 135 L200 140 L240 130 L280 135 L320 125 L360 130 L360 150 L40 150 Z' fill='%234fc3f7'/%3E%3Crect x='100' y='100' width='40' height='50' fill='%238d6e63'/%3E%3Crect x='260' y='110' width='40' height='40' fill='%238d6e63'/%3E%3Cpath d='M90 100 L120 80 L150 100 L120 90 Z' fill='%23d32f2f'/%3E%3Cpath d='M250 110 L280 90 L310 110 L280 100 Z' fill='%23d32f2f'/%3E%3Ctext x='200' y='280' text-anchor='middle' fill='%23333' font-family='Arial' font-size='12'%3EÁrea de Albercas%3C/text%3E%3C/svg%3E"
                ],
                imagenPrincipal: 0,
                icono: "fas fa-swimming-pool"
            }
        ];

        // Simulated business data for dashboard
        const simulatedBusinessData = [
            // Alimentos y Bebidas
            {
                id: 1,
                nombre: "Restaurante El Sabor",
                propietario: "María González Hernández",
                categoria: "alimentos",
                categoriaNombre: "Alimentos y Bebidas",
                giro: "restaurante",
                giroNombre: "Restaurante",
                telefono: "(873) 742-1234",
                email: "elsabor@email.com",
                direccion: "Calle Hidalgo #123, Centro",
                horarioApertura: "08:00",
                horarioCierre: "22:00",
                serviciosGenerales: ["domicilio", "whatsapp", "tarjetas", "wifi"],
                fechaRegistro: "2024-03-15",
                icono: "fas fa-utensils",
                horarioExtendido: true
            },
            {
                id: 2,
                nombre: "Panadería La Espiga",
                propietario: "Rosa María Castillo",
                categoria: "alimentos",
                categoriaNombre: "Alimentos y Bebidas",
                giro: "panaderia",
                giroNombre: "Panadería",
                telefono: "(873) 742-9012",
                email: "laespiga@email.com",
                direccion: "Calle Morelos #89, Col. San Antonio",
                horarioApertura: "06:00",
                horarioCierre: "20:00",
                serviciosGenerales: ["whatsapp", "efectivo"],
                fechaRegistro: "2024-02-28",
                icono: "fas fa-bread-slice"
            },
            {
                id: 3,
                nombre: "Taquería Don Pepe",
                propietario: "José Luis Ramírez",
                categoria: "alimentos",
                categoriaNombre: "Alimentos y Bebidas",
                giro: "restaurante",
                giroNombre: "Taquería",
                telefono: "(873) 742-4567",
                direccion: "Av. Independencia #567, Centro",
                horarioApertura: "18:00",
                horarioCierre: "02:00",
                serviciosGenerales: ["domicilio", "efectivo"],
                fechaRegistro: "2024-03-20",
                icono: "fas fa-utensils",
                finDeSemana: true
            },
            {
                id: 4,
                nombre: "Cafetería Central",
                propietario: "Ana Sofía Mendoza",
                categoria: "alimentos",
                categoriaNombre: "Alimentos y Bebidas",
                giro: "cafeteria",
                giroNombre: "Cafetería",
                telefono: "(873) 742-8901",
                email: "cafecentral@email.com",
                direccion: "Plaza Principal #12, Centro",
                horarioApertura: "07:00",
                horarioCierre: "21:00",
                serviciosGenerales: ["wifi", "tarjetas", "aire", "whatsapp"],
                fechaRegistro: "2024-03-10",
                icono: "fas fa-coffee",
                finDeSemana: true
            },
            {
                id: 5,
                nombre: "Carnicería El Buen Corte",
                propietario: "Fernando Vázquez",
                categoria: "alimentos",
                categoriaNombre: "Alimentos y Bebidas",
                giro: "carniceria",
                giroNombre: "Carnicería",
                telefono: "(873) 742-2345",
                direccion: "Calle Allende #234, Col. Norte",
                horarioApertura: "07:00",
                horarioCierre: "19:00",
                serviciosGenerales: ["credito", "mayoreo"],
                fechaRegistro: "2024-01-30",
                icono: "fas fa-drumstick-bite"
            },

            // Comercio y Ventas
            {
                id: 6,
                nombre: "Ferretería San José",
                propietario: "Juan Carlos Pérez",
                categoria: "comercio",
                categoriaNombre: "Comercio y Ventas",
                giro: "ferreteria",
                giroNombre: "Ferretería",
                telefono: "(873) 742-5678",
                email: "ferreteria@email.com",
                direccion: "Av. Revolución #456, Centro",
                horarioApertura: "07:00",
                horarioCierre: "19:00",
                serviciosGenerales: ["credito", "mayoreo", "estacionamiento", "tarjetas"],
                fechaRegistro: "2024-01-20",
                icono: "fas fa-tools",
                finDeSemana: true
            },
            {
                id: 7,
                nombre: "Abarrotes Lupita",
                propietario: "Guadalupe Morales",
                categoria: "comercio",
                categoriaNombre: "Comercio y Ventas",
                giro: "abarrotes",
                giroNombre: "Tienda de Abarrotes",
                telefono: "(873) 742-6789",
                direccion: "Calle Zaragoza #345, Col. San Antonio",
                horarioApertura: "06:00",
                horarioCierre: "22:00",
                serviciosGenerales: ["credito", "whatsapp", "efectivo"],
                fechaRegistro: "2024-02-10",
                icono: "fas fa-shopping-basket",
                horarioExtendido: true,
                finDeSemana: true
            },
            {
                id: 8,
                nombre: "Papelería Escolar",
                propietario: "Carmen Jiménez",
                categoria: "comercio",
                categoriaNombre: "Comercio y Ventas",
                giro: "papeleria",
                giroNombre: "Papelería",
                telefono: "(873) 742-7890",
                direccion: "Av. Educación #123, Centro",
                horarioApertura: "08:00",
                horarioCierre: "20:00",
                serviciosGenerales: ["separado", "tarjetas"],
                fechaRegistro: "2024-02-20",
                icono: "fas fa-pen"
            },
            {
                id: 9,
                nombre: "Mercería Hilos y Telas",
                propietario: "Esperanza Rodríguez",
                categoria: "comercio",
                categoriaNombre: "Comercio y Ventas",
                giro: "merceria",
                giroNombre: "Mercería",
                telefono: "(873) 742-8901",
                direccion: "Calle Comercio #456, Centro",
                horarioApertura: "09:00",
                horarioCierre: "18:00",
                serviciosGenerales: ["separado", "efectivo"],
                fechaRegistro: "2024-03-05",
                icono: "fas fa-cut"
            },
            {
                id: 10,
                nombre: "Electrónicos Modernos",
                propietario: "Ricardo Herrera",
                categoria: "comercio",
                categoriaNombre: "Comercio y Ventas",
                giro: "electronica",
                giroNombre: "Electrónicos",
                telefono: "(873) 742-9012",
                email: "electronicos@email.com",
                direccion: "Av. Tecnología #789, Col. Poniente",
                horarioApertura: "10:00",
                horarioCierre: "20:00",
                serviciosGenerales: ["garantia", "tarjetas", "transferencia", "instalacion"],
                fechaRegistro: "2024-01-05",
                icono: "fas fa-mobile-alt"
            },

            // Servicios
            {
                id: 11,
                nombre: "Taller Mecánico El Rayo",
                propietario: "Roberto Sánchez",
                categoria: "servicios",
                categoriaNombre: "Servicios",
                giro: "mecanico",
                giroNombre: "Taller Mecánico",
                telefono: "(873) 742-7890",
                direccion: "Carretera Nacional Km 2.5, Col. Industrial",
                horarioApertura: "08:00",
                horarioCierre: "18:00",
                serviciosGenerales: ["garantia", "reparacion", "estacionamiento"],
                fechaRegistro: "2024-01-25",
                icono: "fas fa-wrench"
            },
            {
                id: 12,
                nombre: "Peluquería Estilo",
                propietario: "Mónica Flores",
                categoria: "servicios",
                categoriaNombre: "Servicios",
                giro: "peluqueria",
                giroNombre: "Peluquería",
                telefono: "(873) 742-3456",
                direccion: "Calle Belleza #123, Centro",
                horarioApertura: "09:00",
                horarioCierre: "19:00",
                serviciosGenerales: ["whatsapp", "tarjetas", "aire"],
                fechaRegistro: "2024-02-25",
                icono: "fas fa-cut",
                finDeSemana: true
            },
            {
                id: 13,
                nombre: "Lavandería Express",
                propietario: "Carlos Mendoza",
                categoria: "servicios",
                categoriaNombre: "Servicios",
                giro: "lavanderia",
                giroNombre: "Lavandería",
                telefono: "(873) 742-4567",
                direccion: "Av. Limpieza #234, Col. Norte",
                horarioApertura: "07:00",
                horarioCierre: "20:00",
                serviciosGenerales: ["domicilio", "tarjetas"],
                fechaRegistro: "2024-03-10",
                icono: "fas fa-tint"
            },

            // Salud y Bienestar
            {
                id: 14,
                nombre: "Farmacia Guadalupe",
                propietario: "Dr. Miguel Ángel Ruiz",
                categoria: "salud",
                categoriaNombre: "Salud y Bienestar",
                giro: "farmacia",
                giroNombre: "Farmacia",
                telefono: "(873) 742-3456",
                email: "farmacia.guadalupe@email.com",
                direccion: "Av. Juárez #234, Centro",
                horarioApertura: "08:00",
                horarioCierre: "21:00",
                serviciosGenerales: ["domicilio", "tarjetas", "transferencia"],
                fechaRegistro: "2024-01-10",
                icono: "fas fa-pills"
            },
            {
                id: 15,
                nombre: "Consultorio Dental Sonrisa",
                propietario: "Dra. Patricia Vega",
                categoria: "salud",
                categoriaNombre: "Salud y Bienestar",
                giro: "consultorio",
                giroNombre: "Consultorio Dental",
                telefono: "(873) 742-5678",
                direccion: "Calle Salud #345, Centro",
                horarioApertura: "09:00",
                horarioCierre: "18:00",
                serviciosGenerales: ["tarjetas", "transferencia", "aire"],
                fechaRegistro: "2024-02-05",
                icono: "fas fa-tooth"
            },
            {
                id: 16,
                nombre: "Veterinaria Amigos Fieles",
                propietario: "Dr. Alejandro Torres",
                categoria: "salud",
                categoriaNombre: "Salud y Bienestar",
                giro: "veterinaria",
                giroNombre: "Veterinaria",
                telefono: "(873) 742-6789",
                direccion: "Av. Mascotas #456, Col. Sur",
                horarioApertura: "08:00",
                horarioCierre: "19:00",
                serviciosGenerales: ["domicilio", "tarjetas", "estacionamiento"],
                fechaRegistro: "2024-03-15",
                icono: "fas fa-paw"
            },

            // Educación y Cultura
            {
                id: 17,
                nombre: "Academia de Música Armonía",
                propietario: "Maestro Luis Alberto Soto",
                categoria: "educacion",
                categoriaNombre: "Educación y Cultura",
                giro: "academia",
                giroNombre: "Academia de Música",
                telefono: "(873) 742-7890",
                direccion: "Calle Arte #567, Centro",
                horarioApertura: "15:00",
                horarioCierre: "21:00",
                serviciosGenerales: ["separado", "tarjetas"],
                fechaRegistro: "2024-03-20",
                icono: "fas fa-music",
                finDeSemana: true
            },
            {
                id: 18,
                nombre: "Librería El Saber",
                propietario: "Elena Castañeda",
                categoria: "educacion",
                categoriaNombre: "Educación y Cultura",
                giro: "libreria",
                giroNombre: "Librería",
                telefono: "(873) 742-8901",
                direccion: "Av. Conocimiento #678, Centro",
                horarioApertura: "09:00",
                horarioCierre: "19:00",
                serviciosGenerales: ["separado", "tarjetas", "wifi"],
                fechaRegistro: "2024-03-25",
                icono: "fas fa-book"
            },

            // Más negocios recientes para mostrar tendencia
            {
                id: 19,
                nombre: "Zapatería El Paso",
                propietario: "Arturo Delgado",
                categoria: "comercio",
                categoriaNombre: "Comercio y Ventas",
                giro: "zapateria",
                giroNombre: "Zapatería",
                telefono: "(873) 742-0123",
                direccion: "Plaza Central #890, Centro",
                horarioApertura: "10:00",
                horarioCierre: "20:00",
                serviciosGenerales: ["separado", "tarjetas"],
                fechaRegistro: "2024-03-28",
                icono: "fas fa-shoe-prints"
            },
            {
                id: 20,
                nombre: "Florería Jardín",
                propietario: "Sofía Ramírez",
                categoria: "comercio",
                categoriaNombre: "Comercio y Ventas",
                giro: "floreria",
                giroNombre: "Florería",
                telefono: "(873) 742-1111",
                direccion: "Av. Flores #999, Col. Jardines",
                horarioApertura: "08:00",
                horarioCierre: "18:00",
                serviciosGenerales: ["domicilio", "whatsapp", "tarjetas"],
                fechaRegistro: "2024-03-30",
                icono: "fas fa-seedling",
                finDeSemana: true
            }
        ];

        // ==========================================
        // RENDERING FUNCTIONS - MODIFY AS NEEDED
        // ==========================================

        function renderAllSections() {
            renderSecretarias();
            renderDirecciones();
            renderCabildo();
            renderLugaresTuristicos();
            renderEventos();
            renderTramites();
            renderBusinessTable();
            renderDashboardCharts();
        }

        function renderSecretarias() {
            const grid = document.getElementById('secretarias-grid');
            grid.innerHTML = secretarias.map(item => createCard(item, 'secretarias')).join('');
        }

        function renderDirecciones() {
            const grid = document.getElementById('direcciones-grid');
            grid.innerHTML = direcciones.map(item => createCard(item, 'direcciones')).join('');
        }

        function renderCabildo() {
            const grid = document.getElementById('cabildo-grid');
            grid.innerHTML = cabildo.map(item => createCard(item, 'cabildo')).join('');
        }

        function renderLugaresTuristicos() {
            const grid = document.getElementById('lugares-grid');
            grid.innerHTML = lugaresTuristicos.map(lugar => createTouristCard(lugar)).join('');
        }

        function renderEventos() {
            filterEvents();
        }

        function renderTramites() {
            filterTramites();
        }

        let filteredEvents = [...eventos];
        let filteredTramites = [...tramites];

        function filterEvents() {
            const categoriaFilter = document.getElementById('filter-categoria')?.value || '';
            const organizadorFilter = document.getElementById('filter-organizador')?.value || '';
            const mesFilter = document.getElementById('filter-mes')?.value || '';
            const estadoFilter = document.getElementById('filter-estado')?.value || '';
            
            filteredEvents = eventos.filter(evento => {
                // Category filter
                if (categoriaFilter && evento.categoria !== categoriaFilter) return false;
                
                // Organizer filter
                if (organizadorFilter && evento.organizador !== organizadorFilter) return false;
                
                // Month filter
                if (mesFilter) {
                    const eventoDate = new Date(evento.fecha);
                    if (eventoDate.getMonth() !== parseInt(mesFilter)) return false;
                }
                
                // Status filter
                if (estadoFilter) {
                    const today = new Date();
                    const eventoDate = new Date(evento.fecha);
                    
                    if (estadoFilter === 'destacado' && !evento.destacado) return false;
                    if (estadoFilter === 'proximo' && eventoDate < today) return false;
                    if (estadoFilter === 'pasado' && eventoDate >= today) return false;
                }
                
                return true;
            });
            
            renderEventsTable();
            updateEventsCount();
        }

        function renderEventsTable() {
            const tbody = document.getElementById('events-table-body');
            const emptyState = document.getElementById('empty-events-state');
            
            if (filteredEvents.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            tbody.innerHTML = filteredEvents.map(evento => {
                const fechaInicio = new Date(evento.fecha);
                const fechaFin = evento.fechaFin ? new Date(evento.fechaFin) : null;
                const today = new Date();
                const isPast = fechaInicio < today;
                const isUpcoming = fechaInicio >= today;
                
                let fechaDisplay = formatEventDate(evento.fecha);
                if (fechaFin) {
                    fechaDisplay += ` - ${formatEventDate(evento.fechaFin)}`;
                }
                
                const categoryColors = {
                    'cultural': 'bg-purple-100 text-purple-800',
                    'deportivo': 'bg-green-100 text-green-800',
                    'religioso': 'bg-blue-100 text-blue-800',
                    'gastronomico': 'bg-orange-100 text-orange-800',
                    'educativo': 'bg-indigo-100 text-indigo-800',
                    'familiar': 'bg-pink-100 text-pink-800'
                };
                
                return `
                    <tr class="hover:bg-gray-50 transition duration-200 cursor-pointer" onclick="viewEventDetail(${evento.id})">
                        <td class="px-6 py-4">
                            <div class="flex items-center">
                                <div class="bg-indigo-100 p-2 rounded-lg mr-3">
                                    <i class="fas fa-calendar-alt text-indigo-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800 flex items-center">
                                        ${evento.titulo}
                                        ${evento.destacado ? '<span class="ml-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">Destacado</span>' : ''}
                                    </div>
                                    <div class="text-sm text-gray-500 truncate max-w-xs">${evento.descripcion}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-sm text-gray-800">${fechaDisplay}</div>
                            <div class="text-sm text-gray-500">${evento.hora}</div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-sm text-gray-800">${evento.lugar}</div>
                            ${evento.colonia ? `<div class="text-sm text-gray-500">${evento.colonia}</div>` : ''}
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-sm text-gray-800">${evento.organizador}</div>
                            <div class="text-sm text-gray-500">${evento.contacto}</div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex flex-col space-y-1">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${categoryColors[evento.categoria] || 'bg-gray-100 text-gray-800'}">
                                    ${evento.categoria.charAt(0).toUpperCase() + evento.categoria.slice(1)}
                                </span>
                                <span class="text-xs ${isPast ? 'text-gray-500' : 'text-green-600'}">
                                    ${isPast ? 'Finalizado' : 'Próximo'}
                                </span>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex space-x-2">
                                <button onclick="event.stopPropagation(); viewEventDetail(${evento.id})" class="text-blue-600 hover:text-blue-700 p-1" title="Ver detalles">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button onclick="event.stopPropagation(); editEvent(${evento.id})" class="text-yellow-600 hover:text-yellow-700 p-1" title="Editar">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="event.stopPropagation(); deleteEvent(${evento.id})" class="text-red-600 hover:text-red-700 p-1" title="Eliminar">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function updateEventsCount() {
            const countElement = document.getElementById('events-count');
            if (countElement) {
                countElement.textContent = `${filteredEvents.length} eventos encontrados`;
            }
        }

        function clearFilters() {
            document.getElementById('filter-categoria').value = '';
            document.getElementById('filter-organizador').value = '';
            document.getElementById('filter-mes').value = '';
            document.getElementById('filter-estado').value = '';
            filterEvents();
        }

        function filterTramites() {
            const categoriaFilter = document.getElementById('filter-tramite-categoria')?.value || '';
            const ubicacionFilter = document.getElementById('filter-tramite-ubicacion')?.value || '';
            const costoFilter = document.getElementById('filter-tramite-costo')?.value || '';
            const estadoFilter = document.getElementById('filter-tramite-estado')?.value || '';
            
            filteredTramites = tramites.filter(tramite => {
                // Category filter
                if (categoriaFilter && tramite.categoria !== categoriaFilter) return false;
                
                // Location filter
                if (ubicacionFilter && tramite.ubicacion !== ubicacionFilter) return false;
                
                // Cost filter
                if (costoFilter) {
                    const isGratuito = tramite.costo.toLowerCase().includes('gratuito');
                    if (costoFilter === 'gratuito' && !isGratuito) return false;
                    if (costoFilter === 'con-costo' && isGratuito) return false;
                }
                
                // Status filter
                if (estadoFilter) {
                    if (estadoFilter === 'destacado' && !tramite.destacado) return false;
                    if (estadoFilter === 'normal' && tramite.destacado) return false;
                }
                
                return true;
            });
            
            renderTramitesTable();
            updateTramitesCount();
        }

        function renderTramitesTable() {
            const tbody = document.getElementById('tramites-table-body');
            const emptyState = document.getElementById('empty-tramites-state');
            
            if (filteredTramites.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            tbody.innerHTML = filteredTramites.map(tramite => {
                const categoryColors = {
                    'identificacion': 'bg-blue-100 text-blue-800',
                    'apoyos': 'bg-green-100 text-green-800',
                    'salud': 'bg-red-100 text-red-800',
                    'educacion': 'bg-purple-100 text-purple-800',
                    'transito': 'bg-yellow-100 text-yellow-800',
                    'comercio': 'bg-orange-100 text-orange-800',
                    'construccion': 'bg-gray-100 text-gray-800',
                    'otros': 'bg-pink-100 text-pink-800'
                };
                
                return `
                    <tr class="hover:bg-gray-50 transition duration-200 cursor-pointer" onclick="viewTramiteDetail('${tramite.id}')">
                        <td class="px-6 py-4">
                            <div class="flex items-center">
                                <div class="bg-teal-100 p-2 rounded-lg mr-3">
                                    <i class="${tramite.icono} text-teal-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800 flex items-center">
                                        ${tramite.titulo}
                                        ${tramite.destacado ? '<span class="ml-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">Destacado</span>' : ''}
                                    </div>
                                    <div class="text-sm text-gray-500 truncate max-w-xs">${tramite.descripcion}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${categoryColors[tramite.categoria] || 'bg-gray-100 text-gray-800'}">
                                ${tramite.categoriaNombre}
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-sm font-medium text-gray-800">${tramite.costo}</div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-sm text-gray-800">${tramite.tiempo}</div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-sm text-gray-800">${tramite.ubicacion}</div>
                            <div class="text-xs text-gray-500">${tramite.horario}</div>
                        </td>
                        <td class="px-6 py-4">
                            <span class="text-xs ${tramite.destacado ? 'text-yellow-600 font-medium' : 'text-gray-500'}">
                                ${tramite.destacado ? 'Destacado' : 'Normal'}
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex space-x-2">
                                <button onclick="event.stopPropagation(); viewTramiteDetail('${tramite.id}')" class="text-blue-600 hover:text-blue-700 p-1" title="Ver detalles">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button onclick="event.stopPropagation(); editTramite('${tramite.id}')" class="text-yellow-600 hover:text-yellow-700 p-1" title="Editar">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="event.stopPropagation(); deleteTramite('${tramite.id}')" class="text-red-600 hover:text-red-700 p-1" title="Eliminar">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function updateTramitesCount() {
            const countElement = document.getElementById('tramites-count');
            if (countElement) {
                countElement.textContent = `${filteredTramites.length} trámites encontrados`;
            }
        }

        function clearTramiteFilters() {
            document.getElementById('filter-tramite-categoria').value = '';
            document.getElementById('filter-tramite-ubicacion').value = '';
            document.getElementById('filter-tramite-costo').value = '';
            document.getElementById('filter-tramite-estado').value = '';
            filterTramites();
        }

        function formatEventDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('es-ES', { 
                day: 'numeric', 
                month: 'short',
                year: 'numeric'
            });
        }

        function createTouristCard(lugar) {
            const mainImage = lugar.imagenes[lugar.imagenPrincipal] || lugar.imagenes[0];
            
            return `
                <div class="bg-white rounded-xl shadow-sm overflow-hidden card-hover fade-in">
                    <div class="relative">
                        <img src="${mainImage}" alt="${lugar.nombre}" class="w-full h-48 object-cover">
                        <div class="absolute top-4 left-4">
                            <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-medium">
                                ${lugar.categoria}
                            </span>
                        </div>
                        <div class="absolute top-4 right-4 flex space-x-2">
                            <button onclick="editTouristPlace(${lugar.id})" class="bg-white bg-opacity-90 hover:bg-opacity-100 p-2 rounded-lg transition duration-200">
                                <i class="fas fa-edit text-gray-600"></i>
                            </button>
                            <button onclick="deleteTouristPlace(${lugar.id})" class="bg-red-500 bg-opacity-90 hover:bg-opacity-100 p-2 rounded-lg transition duration-200">
                                <i class="fas fa-trash text-white"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-3">
                            <h3 class="text-xl font-bold text-gray-800 flex-1">${lugar.nombre}</h3>
                            <div class="bg-orange-100 p-2 rounded-lg ml-3">
                                <i class="${lugar.icono} text-orange-600"></i>
                            </div>
                        </div>
                        
                        <p class="text-gray-600 mb-4 text-sm leading-relaxed">${lugar.descripcion}</p>
                        
                        <div class="space-y-2 text-sm mb-4">
                            <div class="flex items-center text-gray-500">
                                <i class="fas fa-map-marker-alt mr-2 text-orange-500"></i>
                                <span class="truncate">${lugar.direccion}</span>
                            </div>
                            <div class="flex items-center text-gray-500">
                                <i class="fas fa-clock mr-2 text-orange-500"></i>
                                <span>${lugar.horario}</span>
                            </div>
                            <div class="flex items-center text-gray-500">
                                <i class="fas fa-ticket-alt mr-2 text-orange-500"></i>
                                <span class="font-medium">${lugar.precio}</span>
                            </div>
                        </div>
                        
                        <div class="flex space-x-2">
                            <button onclick="viewTouristPlace(${lugar.id})" class="flex-1 bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition duration-200 text-sm font-medium">
                                <i class="fas fa-images mr-2"></i>
                                Ver Galería
                            </button>
                            <a href="${lugar.googleMaps}" target="_blank" class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-200 text-sm">
                                <i class="fas fa-map"></i>
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderBusinessTable() {
            const tbody = document.getElementById('business-table-body');
            const emptyState = document.getElementById('empty-business-state');
            
            if (simulatedBusinessData.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            tbody.innerHTML = simulatedBusinessData.map(business => `
                <tr class="hover:bg-gray-50 transition duration-200">
                    <td class="px-6 py-4">
                        <div class="flex items-center">
                            <div class="bg-gov-blue bg-opacity-10 p-2 rounded-lg mr-3">
                                <i class="${business.icono} text-gov-blue"></i>
                            </div>
                            <div>
                                <div class="font-medium text-gray-800">${business.nombre}</div>
                                <div class="text-sm text-gray-500">${business.giroNombre}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-gray-800">${business.propietario}</div>
                        <div class="text-sm text-gray-500">${business.direccion}</div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                            ${business.categoriaNombre}
                        </span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-800">${business.telefono}</div>
                        ${business.email ? `<div class="text-sm text-gray-500">${business.email}</div>` : ''}
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex space-x-2">
                            <button onclick="viewBusiness(${business.id})" class="text-blue-600 hover:text-blue-700 p-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button onclick="editBusiness(${business.id})" class="text-yellow-600 hover:text-yellow-700 p-1">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteBusiness(${business.id})" class="text-red-600 hover:text-red-700 p-1">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function createCard(item, type) {
            const colorClasses = {
                'secretarias': 'from-gov-blue to-blue-600',
                'direcciones': 'from-gov-green to-green-600',
                'cabildo': 'from-purple-600 to-purple-700'
            };

            return `
                <div class="bg-white rounded-xl shadow-sm overflow-hidden card-hover fade-in">
                    <div class="bg-gradient-to-r ${colorClasses[type]} p-6 text-white">
                        <div class="flex items-center justify-between mb-4">
                            <div class="bg-white bg-opacity-20 p-3 rounded-lg">
                                <i class="${item.icono} text-2xl"></i>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="editItem('${type}', ${item.id})" class="bg-white bg-opacity-20 hover:bg-opacity-30 p-2 rounded-lg transition duration-200">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="deleteItem('${type}', ${item.id})" class="bg-red-500 bg-opacity-80 hover:bg-opacity-100 p-2 rounded-lg transition duration-200">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <h3 class="text-xl font-bold mb-2">${item.nombre}</h3>
                        <p class="text-sm opacity-90">${item.responsable || item.nombre}</p>
                        <p class="text-xs opacity-75">${item.titulo}</p>
                    </div>
                    
                    <div class="p-6">
                        <p class="text-gray-600 mb-4">${item.descripcion}</p>
                        
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center text-gray-500">
                                <i class="fas fa-phone mr-2"></i>
                                <span>${item.telefono}</span>
                            </div>
                            <div class="flex items-center text-gray-500">
                                <i class="fas fa-envelope mr-2"></i>
                                <span class="truncate">${item.email}</span>
                            </div>
                            ${item.partido ? `
                                <div class="flex items-center text-gray-500">
                                    <i class="fas fa-flag mr-2"></i>
                                    <span class="text-xs">${item.partido}</span>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        // ==========================================
        // DASHBOARD ANALYTICS FUNCTIONS
        // ==========================================

        function renderDashboardCharts() {
            updateMainKPIs();
            renderCategoryChart();
            renderMonthlyTrendChart();
            renderSubcategoryChart();
            renderAreaDistribution();
            renderServiceIndicators();
            renderScheduleCoverage();
            renderRecentBusinesses();
        }

        function updateMainKPIs() {
            const totalBusinesses = simulatedBusinessData.length;
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            
            // New businesses this month
            const newThisMonth = simulatedBusinessData.filter(business => {
                const registrationDate = new Date(business.fechaRegistro);
                return registrationDate.getMonth() === currentMonth && 
                       registrationDate.getFullYear() === currentYear;
            }).length;
            
            // Weekend businesses
            const weekendBusinesses = simulatedBusinessData.filter(business => business.finDeSemana).length;
            
            // Digital businesses (with digital services)
            const digitalBusinesses = simulatedBusinessData.filter(business => 
                business.serviciosGenerales.some(service => 
                    ['whatsapp', 'wifi', 'tarjetas', 'transferencia'].includes(service)
                )
            ).length;
            
            // Update DOM
            document.getElementById('total-businesses-count').textContent = totalBusinesses;
            document.getElementById('new-businesses-month').textContent = newThisMonth;
            document.getElementById('weekend-businesses').textContent = weekendBusinesses;
            document.getElementById('digital-businesses').textContent = digitalBusinesses;
            
            // Calculate percentages
            const weekendPercentage = totalBusinesses > 0 ? Math.round((weekendBusinesses / totalBusinesses) * 100) : 0;
            const digitalPercentage = totalBusinesses > 0 ? Math.round((digitalBusinesses / totalBusinesses) * 100) : 0;
            const growthPercentage = newThisMonth > 0 ? '+' + Math.round((newThisMonth / totalBusinesses) * 100) : '0';
            
            document.getElementById('weekend-percentage').textContent = `${weekendPercentage}% del total`;
            document.getElementById('digital-percentage').textContent = `${digitalPercentage}% del total`;
            document.getElementById('business-growth').textContent = `${growthPercentage}% este mes`;
        }

        function renderCategoryChart() {
            const categoryData = {};
            simulatedBusinessData.forEach(business => {
                categoryData[business.categoriaNombre] = (categoryData[business.categoriaNombre] || 0) + 1;
            });
            
            const sortedCategories = Object.entries(categoryData)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5);
            
            const maxCount = Math.max(...sortedCategories.map(([,count]) => count));
            
            const chartHTML = sortedCategories.map(([category, count]) => {
                const percentage = (count / maxCount) * 100;
                const color = getCategoryColor(category);
                
                return `
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center flex-1">
                            <span class="text-sm font-medium text-gray-700 w-32 truncate">${category}</span>
                            <div class="flex-1 mx-3">
                                <div class="bg-gray-200 rounded-full h-2">
                                    <div class="h-2 rounded-full ${color}" style="width: ${percentage}%"></div>
                                </div>
                            </div>
                        </div>
                        <span class="text-sm font-bold text-gray-800 ml-2">${count}</span>
                    </div>
                `;
            }).join('');
            
            document.getElementById('category-chart').innerHTML = chartHTML;
        }

        function renderMonthlyTrendChart() {
            const monthlyData = {};
            const months = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'];
            
            // Initialize months
            months.forEach(month => monthlyData[month] = 0);
            
            // Count registrations by month
            simulatedBusinessData.forEach(business => {
                const date = new Date(business.fechaRegistro);
                const monthName = months[date.getMonth()];
                if (monthName) {
                    monthlyData[monthName]++;
                }
            });
            
            const maxCount = Math.max(...Object.values(monthlyData));
            
            const chartHTML = months.map(month => {
                const count = monthlyData[month];
                const percentage = maxCount > 0 ? (count / maxCount) * 100 : 0;
                
                return `
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700 w-12">${month}</span>
                        <div class="flex-1 mx-3">
                            <div class="bg-gray-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-gov-blue to-gov-green h-2 rounded-full" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                        <span class="text-sm font-bold text-gray-800 w-8 text-right">${count}</span>
                    </div>
                `;
            }).join('');
            
            document.getElementById('monthly-trend-chart').innerHTML = chartHTML;
        }

        function renderSubcategoryChart() {
            const subcategoryData = {};
            simulatedBusinessData.forEach(business => {
                subcategoryData[business.giroNombre] = (subcategoryData[business.giroNombre] || 0) + 1;
            });
            
            const sortedSubcategories = Object.entries(subcategoryData)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 6);
            
            const maxCount = Math.max(...sortedSubcategories.map(([,count]) => count));
            
            const chartHTML = sortedSubcategories.map(([subcategory, count]) => {
                const percentage = (count / maxCount) * 100;
                
                return `
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700 flex-1 truncate">${subcategory}</span>
                        <div class="w-24 mx-3">
                            <div class="bg-gray-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                        <span class="text-sm font-bold text-gray-800 w-8 text-right">${count}</span>
                    </div>
                `;
            }).join('');
            
            document.getElementById('subcategory-chart').innerHTML = chartHTML;
        }

        function renderAreaDistribution() {
            const areaData = {};
            simulatedBusinessData.forEach(business => {
                const area = business.direccion.includes('Centro') ? 'Centro' : 
                           business.direccion.includes('Col.') ? 
                           business.direccion.split('Col. ')[1]?.split(',')[0] || 'Otras' : 'Otras';
                areaData[area] = (areaData[area] || 0) + 1;
            });
            
            const sortedAreas = Object.entries(areaData)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5);
            
            const maxCount = Math.max(...sortedAreas.map(([,count]) => count));
            
            const chartHTML = sortedAreas.map(([area, count]) => {
                const percentage = (count / maxCount) * 100;
                
                return `
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700 flex-1 truncate">${area}</span>
                        <div class="w-24 mx-3">
                            <div class="bg-gray-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-orange-500 to-red-500 h-2 rounded-full" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                        <span class="text-sm font-bold text-gray-800 w-8 text-right">${count}</span>
                    </div>
                `;
            }).join('');
            
            document.getElementById('area-distribution').innerHTML = chartHTML;
        }

        function renderServiceIndicators() {
            const services = {
                'Entrega a domicilio': 'domicilio',
                'WhatsApp': 'whatsapp',
                'Tarjetas de crédito': 'tarjetas',
                'WiFi gratuito': 'wifi',
                'Aire acondicionado': 'aire',
                'Estacionamiento': 'estacionamiento'
            };
            
            const serviceStats = Object.entries(services).map(([name, key]) => {
                const count = simulatedBusinessData.filter(business => 
                    business.serviciosGenerales.includes(key)
                ).length;
                const percentage = simulatedBusinessData.length > 0 ? 
                    Math.round((count / simulatedBusinessData.length) * 100) : 0;
                
                return { name, count, percentage };
            }).sort((a, b) => b.count - a.count);
            
            const chartHTML = serviceStats.map(service => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-gov-blue rounded-full mr-3"></div>
                        <span class="text-sm font-medium text-gray-700">${service.name}</span>
                    </div>
                    <div class="text-right">
                        <span class="text-sm font-bold text-gray-800">${service.count}</span>
                        <span class="text-xs text-gray-500 ml-1">(${service.percentage}%)</span>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('services-indicators').innerHTML = chartHTML;
        }

        function renderScheduleCoverage() {
            const scheduleStats = {
                'Horario extendido (12+ hrs)': simulatedBusinessData.filter(b => b.horarioExtendido).length,
                'Abierto fin de semana': simulatedBusinessData.filter(b => b.finDeSemana).length,
                'Horario matutino (antes 8am)': simulatedBusinessData.filter(b => 
                    b.horarioApertura && b.horarioApertura <= '08:00'
                ).length,
                'Horario nocturno (después 9pm)': simulatedBusinessData.filter(b => 
                    b.horarioCierre && b.horarioCierre >= '21:00'
                ).length
            };
            
            const chartHTML = Object.entries(scheduleStats).map(([name, count]) => {
                const percentage = simulatedBusinessData.length > 0 ? 
                    Math.round((count / simulatedBusinessData.length) * 100) : 0;
                
                return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-gov-green rounded-full mr-3"></div>
                            <span class="text-sm font-medium text-gray-700">${name}</span>
                        </div>
                        <div class="text-right">
                            <span class="text-sm font-bold text-gray-800">${count}</span>
                            <span class="text-xs text-gray-500 ml-1">(${percentage}%)</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('schedule-coverage').innerHTML = chartHTML;
        }

        function renderRecentBusinesses() {
            const recentBusinesses = simulatedBusinessData
                .sort((a, b) => new Date(b.fechaRegistro) - new Date(a.fechaRegistro))
                .slice(0, 5);
            
            const chartHTML = recentBusinesses.map(business => `
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                        <div class="bg-gov-blue bg-opacity-10 p-2 rounded-lg mr-3">
                            <i class="${business.icono} text-gov-blue"></i>
                        </div>
                        <div>
                            <div class="font-medium text-gray-800">${business.nombre}</div>
                            <div class="text-sm text-gray-500">${business.giroNombre} • ${business.propietario}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-medium text-gray-800">${formatDate(business.fechaRegistro)}</div>
                        <div class="text-xs text-gray-500">${business.categoriaNombre}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('recent-businesses').innerHTML = chartHTML;
        }

        // ==========================================
        // UTILITY FUNCTIONS
        // ==========================================

        function getCategoryColor(category) {
            const colors = {
                'Alimentos y Bebidas': 'bg-red-500',
                'Comercio y Ventas': 'bg-blue-500',
                'Servicios': 'bg-green-500',
                'Salud y Bienestar': 'bg-purple-500',
                'Educación y Cultura': 'bg-yellow-500'
            };
            return colors[category] || 'bg-gray-500';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('es-ES', { 
                day: 'numeric', 
                month: 'short' 
            });
        }

        function updateCounts() {
            document.getElementById('total-businesses').textContent = simulatedBusinessData.length;
        }

        // ==========================================
        // MODAL FUNCTIONS
        // ==========================================

        function openModal(type) {
            currentEditType = type;
            currentEditId = null;
            
            // Clear any existing images when opening a new modal
            window.currentImages = [];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const submitBtn = document.getElementById('submit-btn');
            
            const config = getModalConfig(type);
            title.textContent = config.title;
            submitBtn.textContent = 'Guardar';
            submitBtn.className = `px-6 py-2 ${config.buttonColor} text-white rounded-lg hover:${config.buttonHover} transition duration-200`;
            
            renderFormFields(type);
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
            document.getElementById('modal-form').reset();
            currentEditId = null;
            currentEditType = null;
            
            // Clear images when closing modal
            window.currentImages = [];
        }

        function getModalConfig(type) {
            const configs = {
                'secretarias': {
                    title: 'Agregar Secretaría',
                    buttonColor: 'bg-gov-blue',
                    buttonHover: 'bg-blue-700'
                },
                'direcciones': {
                    title: 'Agregar Dirección',
                    buttonColor: 'bg-gov-green',
                    buttonHover: 'bg-green-700'
                },
                'cabildo': {
                    title: 'Agregar Miembro del Cabildo',
                    buttonColor: 'bg-purple-600',
                    buttonHover: 'bg-purple-700'
                },
                'lugares': {
                    title: 'Agregar Lugar Turístico',
                    buttonColor: 'bg-orange-500',
                    buttonHover: 'bg-orange-600'
                },
                'eventos': {
                    title: 'Agregar Evento',
                    buttonColor: 'bg-indigo-600',
                    buttonHover: 'bg-indigo-700'
                },
                'tramites': {
                    title: 'Agregar Trámite',
                    buttonColor: 'bg-teal-600',
                    buttonHover: 'bg-teal-700'
                }
            };
            return configs[type];
        }

        function renderFormFields(type) {
            const container = document.getElementById('form-fields');
            
            if (type === 'tramites') {
                container.innerHTML = `
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Título del Trámite *</label>
                        <input type="text" id="titulo" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Ej. Renovación de Licencia de Conducir">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Descripción Corta *</label>
                        <textarea id="descripcion" required rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Breve descripción del trámite y para qué sirve..."></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Categoría *</label>
                        <select id="categoria" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="">Seleccionar categoría</option>
                            <option value="identificacion">Identificación y Documentos</option>
                            <option value="apoyos">Apoyos Económicos y Sociales</option>
                            <option value="salud">Salud</option>
                            <option value="educacion">Educación</option>
                            <option value="transito">Tránsito y Transporte</option>
                            <option value="comercio">Comercio y Negocios</option>
                            <option value="construccion">Construcción y Obras</option>
                            <option value="otros">Otros</option>
                        </select>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Costo *</label>
                            <input type="text" id="costo" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Ej. Gratuito, $850, $15 por m²">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tiempo de Resolución *</label>
                            <input type="text" id="tiempo" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Ej. 30 minutos, 15 días hábiles">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ubicación *</label>
                            <select id="ubicacion" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                <option value="">Seleccionar ubicación</option>
                                <option value="Presidencia Municipal">Presidencia Municipal</option>
                                <option value="DIF Municipal">DIF Municipal</option>
                                <option value="Módulo de Tránsito">Módulo de Tránsito</option>
                                <option value="Registro Civil">Registro Civil</option>
                                <option value="Catastro">Catastro</option>
                                <option value="Desarrollo Económico">Desarrollo Económico</option>
                                <option value="Dirección de Obras Públicas">Dirección de Obras Públicas</option>
                                <option value="Secretaría de Salud">Secretaría de Salud</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Horario de Atención *</label>
                            <input type="text" id="horario" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Ej. Lunes a Viernes 8:00–15:00 hrs">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Requisitos *</label>
                        <div id="requisitos-container" class="space-y-2">
                            <div class="flex items-center space-x-2">
                                <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Ej. Identificación oficial vigente">
                                <button type="button" onclick="removeRequirement(this)" class="text-red-600 hover:text-red-700 p-2">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <button type="button" onclick="addRequirement()" class="mt-2 text-teal-600 hover:text-teal-700 text-sm font-medium">
                            <i class="fas fa-plus mr-1"></i>
                            Agregar requisito
                        </button>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Procedimiento (Pasos) *</label>
                        <div id="procedimiento-container" class="space-y-2">
                            <div class="flex items-center space-x-2">
                                <span class="bg-teal-100 text-teal-800 px-2 py-1 rounded text-sm font-medium">1</span>
                                <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Ej. Presentarse en la oficina con documentos">
                                <button type="button" onclick="removeProcedureStep(this)" class="text-red-600 hover:text-red-700 p-2">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <button type="button" onclick="addProcedureStep()" class="mt-2 text-teal-600 hover:text-teal-700 text-sm font-medium">
                            <i class="fas fa-plus mr-1"></i>
                            Agregar paso
                        </button>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Descripción Adicional</label>
                        <textarea id="descripcionLarga" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Información adicional, notas importantes, excepciones, etc."></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Icono</label>
                        <select id="icono" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="fas fa-file-alt">Documento</option>
                            <option value="fas fa-id-card">Identificación</option>
                            <option value="fas fa-hand-holding-heart">Apoyo Social</option>
                            <option value="fas fa-heartbeat">Salud</option>
                            <option value="fas fa-graduation-cap">Educación</option>
                            <option value="fas fa-car">Vehículo</option>
                            <option value="fas fa-store">Negocio</option>
                            <option value="fas fa-hard-hat">Construcción</option>
                            <option value="fas fa-home">Casa</option>
                            <option value="fas fa-baby">Bebé</option>
                            <option value="fas fa-ring">Matrimonio</option>
                            <option value="fas fa-certificate">Certificado</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="destacado" class="rounded border-gray-300 text-teal-600 shadow-sm focus:border-teal-300 focus:ring focus:ring-teal-200 focus:ring-opacity-50">
                            <span class="ml-2 text-sm text-gray-700">Marcar como trámite destacado (aparecerá en "Trámites más solicitados")</span>
                        </label>
                    </div>
                `;
                
                return;
            }
            
            if (type === 'eventos') {
                container.innerHTML = `
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Título del Evento *</label>
                        <input type="text" id="titulo" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Ej. Feria de San José">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Descripción *</label>
                        <textarea id="descripcion" required rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Breve resumen del evento, actividades principales y público objetivo..."></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de Inicio *</label>
                            <input type="date" id="fecha" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de Fin (opcional)</label>
                            <input type="date" id="fechaFin" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Hora *</label>
                        <input type="text" id="hora" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Ej. 18:00 hrs, Todo el día, 10:00 - 22:00 hrs">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Lugar *</label>
                            <input type="text" id="lugar" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Ej. Plaza Principal, Auditorio Municipal">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Colonia (opcional)</label>
                            <input type="text" id="colonia" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Para clasificar por zona">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Organizador *</label>
                        <select id="organizador" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="">Seleccionar organizador</option>
                            <option value="Dirección de Cultura">Dirección de Cultura</option>
                            <option value="Desarrollo Económico">Desarrollo Económico</option>
                            <option value="Secretaría de Desarrollo Social">Secretaría de Desarrollo Social</option>
                            <option value="Dirección de Deportes">Dirección de Deportes</option>
                            <option value="Parroquia San José">Parroquia San José</option>
                            <option value="Dirección de Educación">Dirección de Educación</option>
                            <option value="Presidencia Municipal">Presidencia Municipal</option>
                            <option value="Otro">Otro (especificar en contacto)</option>
                        </select>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contacto *</label>
                            <input type="text" id="contacto" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Teléfono o email de informes">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Precio *</label>
                            <input type="text" id="precio" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Ej. Entrada gratuita, $50 por persona">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Categoría *</label>
                        <select id="categoria" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="">Seleccionar categoría</option>
                            <option value="cultural">Cultural</option>
                            <option value="deportivo">Deportivo</option>
                            <option value="religioso">Religioso</option>
                            <option value="gastronomico">Gastronómico</option>
                            <option value="educativo">Educativo</option>
                            <option value="familiar">Familiar</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="destacado" class="rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                            <span class="ml-2 text-sm text-gray-700">Marcar como evento destacado (aparecerá primero en la página pública)</span>
                        </label>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Fotos del Evento</label>
                        <div class="space-y-3">
                            <input type="file" id="fotos" multiple accept="image/*" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <p class="text-xs text-gray-500">Puedes seleccionar múltiples imágenes para mostrar en la galería del evento.</p>
                            <div id="image-preview" class="grid grid-cols-3 gap-2 mt-3">
                                <!-- Image previews will appear here -->
                            </div>
                        </div>
                    </div>
                `;
                
                // Add event listener for image preview
                setTimeout(() => {
                    const imageInput = document.getElementById('fotos');
                    if (imageInput) {
                        imageInput.addEventListener('change', handleImagePreview);
                    }
                }, 100);
                
                return;
            }
            
            if (type === 'lugares') {
                container.innerHTML = `
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nombre del Lugar *</label>
                        <input type="text" id="nombre" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Categoría *</label>
                        <select id="categoria" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            <option value="">Seleccionar categoría</option>
                            <option value="Plaza y Jardines">Plaza y Jardines</option>
                            <option value="Patrimonio Religioso">Patrimonio Religioso</option>
                            <option value="Naturaleza y Senderismo">Naturaleza y Senderismo</option>
                            <option value="Cultura e Historia">Cultura e Historia</option>
                            <option value="Recreación Acuática">Recreación Acuática</option>
                            <option value="Arquitectura Colonial">Arquitectura Colonial</option>
                            <option value="Gastronomía Local">Gastronomía Local</option>
                            <option value="Deportes y Aventura">Deportes y Aventura</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Descripción *</label>
                        <textarea id="descripcion" required rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Describe el lugar turístico, sus características principales y qué lo hace especial..."></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Dirección *</label>
                        <input type="text" id="direccion" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Dirección completa del lugar">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Horario de Atención *</label>
                            <input type="text" id="horario" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Ej: Lunes a Domingo: 9:00 AM - 6:00 PM">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Precio de Entrada *</label>
                            <input type="text" id="precio" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Ej: Gratuito, $50 adultos, $30 niños">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Link de Google Maps *</label>
                        <input type="url" id="googleMaps" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="https://maps.google.com/?q=...">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Recomendaciones</label>
                        <textarea id="recomendaciones" rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Consejos útiles para los visitantes (horarios recomendados, qué llevar, etc.)"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Icono</label>
                        <select id="icono" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            <option value="fas fa-monument">Monumento</option>
                            <option value="fas fa-church">Iglesia</option>
                            <option value="fas fa-mountain">Montaña</option>
                            <option value="fas fa-university">Museo</option>
                            <option value="fas fa-swimming-pool">Alberca</option>
                            <option value="fas fa-tree">Árbol</option>
                            <option value="fas fa-camera">Cámara</option>
                            <option value="fas fa-map-marked-alt">Mapa</option>
                            <option value="fas fa-hiking">Senderismo</option>
                            <option value="fas fa-water">Agua</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Imágenes</label>
                        <div class="space-y-3">
                            <input type="file" id="imagenes" multiple accept="image/*" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            <p class="text-xs text-gray-500">Puedes seleccionar múltiples imágenes. La primera será la imagen principal.</p>
                            <div id="image-preview" class="grid grid-cols-3 gap-2 mt-3">
                                <!-- Image previews will appear here -->
                            </div>
                        </div>
                    </div>
                `;
                
                // Add event listener for image preview
                setTimeout(() => {
                    const imageInput = document.getElementById('imagenes');
                    if (imageInput) {
                        imageInput.addEventListener('change', handleImagePreview);
                    }
                }, 100);
                
                return;
            }
            
            const commonFields = `
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nombre *</label>
                    <input type="text" id="nombre" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Responsable *</label>
                    <input type="text" id="responsable" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Título *</label>
                    <input type="text" id="titulo" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Descripción *</label>
                    <textarea id="descripcion" required rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Teléfono *</label>
                        <input type="tel" id="telefono" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                        <input type="email" id="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Icono</label>
                    <select id="icono" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="fas fa-building">Edificio</option>
                        <option value="fas fa-users">Usuarios</option>
                        <option value="fas fa-gavel">Martillo</option>
                        <option value="fas fa-coins">Monedas</option>
                        <option value="fas fa-heart">Corazón</option>
                        <option value="fas fa-heartbeat">Latido</option>
                        <option value="fas fa-hard-hat">Casco</option>
                        <option value="fas fa-graduation-cap">Graduación</option>
                        <option value="fas fa-user-tie">Usuario Formal</option>
                        <option value="fas fa-female">Mujer</option>
                    </select>
                </div>
            `;
            
            let specificFields = '';
            if (type === 'cabildo') {
                specificFields = `
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Partido Político</label>
                        <input type="text" id="partido" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                `;
            }
            
            container.innerHTML = commonFields + specificFields;
        }

        function editItem(type, id) {
            currentEditType = type;
            currentEditId = id;
            
            const arrays = { secretarias, direcciones, cabildo };
            const item = arrays[type].find(item => item.id === id);
            
            if (!item) return;
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const submitBtn = document.getElementById('submit-btn');
            
            const config = getModalConfig(type);
            title.textContent = config.title.replace('Agregar', 'Editar');
            submitBtn.textContent = 'Actualizar';
            submitBtn.className = `px-6 py-2 ${config.buttonColor} text-white rounded-lg hover:${config.buttonHover} transition duration-200`;
            
            renderFormFields(type);
            
            // Fill form with existing data
            document.getElementById('nombre').value = item.nombre;
            document.getElementById('responsable').value = item.responsable || item.nombre;
            document.getElementById('titulo').value = item.titulo;
            document.getElementById('descripcion').value = item.descripcion;
            document.getElementById('telefono').value = item.telefono;
            document.getElementById('email').value = item.email;
            document.getElementById('icono').value = item.icono;
            
            if (type === 'cabildo' && item.partido) {
                document.getElementById('partido').value = item.partido;
            }
            
            modal.classList.remove('hidden');
        }

        function saveItem() {
            if (currentEditType === 'lugares') {
                saveTouristPlace();
                return;
            }
            
            if (currentEditType === 'tramites') {
                saveTramite();
                return;
            }
            
            if (currentEditType === 'eventos') {
                saveEvent();
                return;
            }
            
            const formData = {
                nombre: document.getElementById('nombre').value,
                responsable: document.getElementById('responsable').value,
                titulo: document.getElementById('titulo').value,
                descripcion: document.getElementById('descripcion').value,
                telefono: document.getElementById('telefono').value,
                email: document.getElementById('email').value,
                icono: document.getElementById('icono').value
            };
            
            if (currentEditType === 'cabildo') {
                formData.partido = document.getElementById('partido').value;
            }
            
            const arrays = { secretarias, direcciones, cabildo };
            
            if (currentEditId) {
                // Update existing item
                const index = arrays[currentEditType].findIndex(item => item.id === currentEditId);
                if (index !== -1) {
                    arrays[currentEditType][index] = { ...arrays[currentEditType][index], ...formData };
                }
            } else {
                // Add new item
                const newId = Math.max(...arrays[currentEditType].map(item => item.id)) + 1;
                arrays[currentEditType].push({ id: newId, ...formData });
            }
            
            renderAllSections();
            closeModal();
        }

        function saveTouristPlace() {
            const formData = {
                nombre: document.getElementById('nombre').value,
                categoria: document.getElementById('categoria').value,
                descripcion: document.getElementById('descripcion').value,
                direccion: document.getElementById('direccion').value,
                horario: document.getElementById('horario').value,
                precio: document.getElementById('precio').value,
                googleMaps: document.getElementById('googleMaps').value,
                recomendaciones: document.getElementById('recomendaciones').value,
                icono: document.getElementById('icono').value,
                imagenes: window.currentImages || [],
                imagenPrincipal: 0
            };
            
            if (currentEditId) {
                // Update existing place
                const index = lugaresTuristicos.findIndex(item => item.id === currentEditId);
                if (index !== -1) {
                    // Keep existing images if no new ones were uploaded
                    if (formData.imagenes.length === 0) {
                        formData.imagenes = lugaresTuristicos[index].imagenes;
                        formData.imagenPrincipal = lugaresTuristicos[index].imagenPrincipal;
                    }
                    lugaresTuristicos[index] = { ...lugaresTuristicos[index], ...formData };
                }
            } else {
                // Add new place
                const newId = Math.max(...lugaresTuristicos.map(item => item.id)) + 1;
                lugaresTuristicos.push({ id: newId, ...formData });
            }
            
            // Clear temporary images
            window.currentImages = [];
            
            renderAllSections();
            closeModal();
        }

        function handleImagePreview(event) {
            const files = event.target.files;
            const previewContainer = document.getElementById('image-preview');
            
            // Initialize currentImages if it doesn't exist
            if (!window.currentImages) {
                window.currentImages = [];
            }
            
            Array.from(files).forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageData = e.target.result;
                    const currentIndex = window.currentImages.length;
                    window.currentImages.push(imageData);
                    
                    const previewDiv = document.createElement('div');
                    previewDiv.className = 'relative group';
                    previewDiv.innerHTML = `
                        <img src="${imageData}" alt="Preview ${currentIndex + 1}" class="w-full h-20 object-cover rounded border">
                        <div class="absolute top-1 right-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded">
                            ${currentIndex === 0 ? 'Principal' : currentIndex + 1}
                        </div>
                        <button type="button" onclick="removeImage(${currentIndex})" class="absolute top-1 left-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                            ×
                        </button>
                        ${currentIndex === 0 ? '' : `
                            <button type="button" onclick="setMainImage(${currentIndex})" class="absolute bottom-1 left-1 bg-orange-500 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                Principal
                            </button>
                        `}
                    `;
                    previewContainer.appendChild(previewDiv);
                };
                reader.readAsDataURL(file);
            });
            
            // Clear the input so the same file can be selected again if needed
            event.target.value = '';
        }

        function removeImage(index) {
            if (!window.currentImages) return;
            
            // Remove the image from the array
            window.currentImages.splice(index, 1);
            
            // Refresh the preview display
            refreshImagePreview();
        }

        function setMainImage(index) {
            if (!window.currentImages || index >= window.currentImages.length) return;
            
            // Move the selected image to the front
            const selectedImage = window.currentImages.splice(index, 1)[0];
            window.currentImages.unshift(selectedImage);
            
            // Refresh the preview display
            refreshImagePreview();
        }

        function refreshImagePreview() {
            const previewContainer = document.getElementById('image-preview');
            if (!previewContainer || !window.currentImages) return;
            
            previewContainer.innerHTML = '';
            
            window.currentImages.forEach((imageData, index) => {
                const previewDiv = document.createElement('div');
                previewDiv.className = 'relative group';
                previewDiv.innerHTML = `
                    <img src="${imageData}" alt="Preview ${index + 1}" class="w-full h-20 object-cover rounded border">
                    <div class="absolute top-1 right-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded">
                        ${index === 0 ? 'Principal' : index + 1}
                    </div>
                    <button type="button" onclick="removeImage(${index})" class="absolute top-1 left-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                        ×
                    </button>
                    ${index === 0 ? '' : `
                        <button type="button" onclick="setMainImage(${index})" class="absolute bottom-1 left-1 bg-orange-500 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                            Principal
                        </button>
                    `}
                `;
                previewContainer.appendChild(previewDiv);
            });
        }

        // Tourist place specific functions
        function viewTouristPlace(id) {
            const lugar = lugaresTuristicos.find(l => l.id === id);
            if (!lugar) return;
            
            const modal = document.getElementById('image-viewer-modal');
            const title = document.getElementById('image-viewer-title');
            const mainImage = document.getElementById('main-viewer-image');
            const thumbnails = document.getElementById('image-thumbnails');
            const placeInfo = document.getElementById('place-info');
            
            title.textContent = lugar.nombre;
            
            // Set main image
            mainImage.src = lugar.imagenes[lugar.imagenPrincipal] || lugar.imagenes[0];
            mainImage.alt = lugar.nombre;
            
            // Create thumbnails
            thumbnails.innerHTML = lugar.imagenes.map((img, index) => `
                <img src="${img}" alt="${lugar.nombre} ${index + 1}" 
                     class="w-16 h-16 object-cover rounded cursor-pointer border-2 ${index === lugar.imagenPrincipal ? 'border-orange-500' : 'border-gray-200'} hover:border-orange-400 transition duration-200"
                     onclick="changeMainImage('${img}', ${index})">
            `).join('');
            
            // Place information
            placeInfo.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-bold text-gray-800 mb-2">${lugar.nombre}</h4>
                        <p class="text-sm text-gray-600 mb-3">${lugar.descripcion}</p>
                        
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center">
                                <i class="fas fa-tag text-orange-500 mr-2"></i>
                                <span class="font-medium">${lugar.categoria}</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-map-marker-alt text-orange-500 mr-2"></i>
                                <span>${lugar.direccion}</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-clock text-orange-500 mr-2"></i>
                                <span>${lugar.horario}</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-ticket-alt text-orange-500 mr-2"></i>
                                <span class="font-medium">${lugar.precio}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h5 class="font-bold text-gray-800 mb-2">Recomendaciones</h5>
                        <p class="text-sm text-gray-600 mb-3">${lugar.recomendaciones}</p>
                        
                        <a href="${lugar.googleMaps}" target="_blank" 
                           class="inline-flex items-center bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-200 text-sm">
                            <i class="fas fa-map mr-2"></i>
                            Ver en Google Maps
                        </a>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function changeMainImage(imageSrc, index) {
            const mainImage = document.getElementById('main-viewer-image');
            const thumbnails = document.querySelectorAll('#image-thumbnails img');
            
            mainImage.src = imageSrc;
            
            // Update thumbnail borders
            thumbnails.forEach((thumb, i) => {
                if (i === index) {
                    thumb.classList.remove('border-gray-200');
                    thumb.classList.add('border-orange-500');
                } else {
                    thumb.classList.remove('border-orange-500');
                    thumb.classList.add('border-gray-200');
                }
            });
        }

        function closeImageViewer() {
            document.getElementById('image-viewer-modal').classList.add('hidden');
        }

        function editTouristPlace(id) {
            currentEditType = 'lugares';
            currentEditId = id;
            
            const lugar = lugaresTuristicos.find(l => l.id === id);
            if (!lugar) return;
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const submitBtn = document.getElementById('submit-btn');
            
            title.textContent = 'Editar Lugar Turístico';
            submitBtn.textContent = 'Actualizar';
            submitBtn.className = 'px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition duration-200';
            
            renderFormFields('lugares');
            
            // Fill form with existing data
            setTimeout(() => {
                document.getElementById('nombre').value = lugar.nombre;
                document.getElementById('categoria').value = lugar.categoria;
                document.getElementById('descripcion').value = lugar.descripcion;
                document.getElementById('direccion').value = lugar.direccion;
                document.getElementById('horario').value = lugar.horario;
                document.getElementById('precio').value = lugar.precio;
                document.getElementById('googleMaps').value = lugar.googleMaps;
                document.getElementById('recomendaciones').value = lugar.recomendaciones || '';
                document.getElementById('icono').value = lugar.icono;
                
                // Show existing images
                const previewContainer = document.getElementById('image-preview');
                previewContainer.innerHTML = lugar.imagenes.map((img, index) => `
                    <div class="relative">
                        <img src="${img}" alt="Imagen ${index + 1}" class="w-full h-20 object-cover rounded border">
                        <div class="absolute top-1 right-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded">
                            ${index === lugar.imagenPrincipal ? 'Principal' : index + 1}
                        </div>
                    </div>
                `).join('');
            }, 100);
            
            modal.classList.remove('hidden');
        }

        function deleteTouristPlace(id) {
            if (confirm('¿Estás seguro de que deseas eliminar este lugar turístico?')) {
                const index = lugaresTuristicos.findIndex(l => l.id === id);
                if (index !== -1) {
                    lugaresTuristicos.splice(index, 1);
                    renderAllSections();
                }
            }
        }

        function deleteItem(type, id) {
            if (confirm('¿Estás seguro de que deseas eliminar este elemento?')) {
                const arrays = { secretarias, direcciones, cabildo, lugares: lugaresTuristicos };
                const index = arrays[type].findIndex(item => item.id === id);
                if (index !== -1) {
                    arrays[type].splice(index, 1);
                    renderAllSections();
                }
            }
        }

        // ==========================================
        // BUSINESS FUNCTIONS (PLACEHOLDER)
        // ==========================================

        function viewBusiness(id) {
            const business = simulatedBusinessData.find(b => b.id === id);
            if (business) {
                alert(`Ver detalles de: ${business.nombre}\n\nEsta funcionalidad se implementará próximamente.`);
            }
        }

        function editBusiness(id) {
            alert('Funcionalidad de edición en desarrollo.\n\nLos negocios se registran desde el portal público.');
        }

        function deleteBusiness(id) {
            alert('Los negocios no se pueden eliminar desde el panel administrativo.\n\nContacta al propietario para modificaciones.');
        }

        function exportBusinessData() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Nombre,Propietario,Categoría,Giro,Teléfono,Email,Dirección,Fecha Registro\n"
                + simulatedBusinessData.map(b => 
                    `"${b.nombre}","${b.propietario}","${b.categoriaNombre}","${b.giroNombre}","${b.telefono}","${b.email || ''}","${b.direccion}","${b.fechaRegistro}"`
                ).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "negocios_registrados.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Chart view toggle (placeholder)
        function toggleChartView(chartType) {
            console.log(`Toggling chart view for: ${chartType}`);
            // This would implement different chart visualizations
        }

        // ==========================================
        // EVENT MANAGEMENT FUNCTIONS
        // ==========================================

        function saveEvent() {
            const formData = {
                titulo: document.getElementById('titulo').value,
                descripcion: document.getElementById('descripcion').value,
                fecha: document.getElementById('fecha').value,
                fechaFin: document.getElementById('fechaFin').value || null,
                hora: document.getElementById('hora').value,
                lugar: document.getElementById('lugar').value,
                colonia: document.getElementById('colonia').value || null,
                organizador: document.getElementById('organizador').value,
                contacto: document.getElementById('contacto').value,
                precio: document.getElementById('precio').value,
                categoria: document.getElementById('categoria').value,
                destacado: document.getElementById('destacado').checked,
                fotos: window.currentImages || []
            };
            
            if (currentEditId) {
                // Update existing event
                const index = eventos.findIndex(item => item.id === currentEditId);
                if (index !== -1) {
                    // Keep existing photos if no new ones were uploaded
                    if (formData.fotos.length === 0) {
                        formData.fotos = eventos[index].fotos;
                    }
                    eventos[index] = { ...eventos[index], ...formData };
                }
            } else {
                // Add new event
                const newId = Math.max(...eventos.map(item => item.id)) + 1;
                eventos.push({ id: newId, ...formData });
            }
            
            // Clear temporary images
            window.currentImages = [];
            
            renderAllSections();
            closeModal();
        }

        function viewEventDetail(id) {
            const evento = eventos.find(e => e.id === id);
            if (!evento) return;
            
            const modal = document.getElementById('event-detail-modal');
            const title = document.getElementById('event-detail-title');
            const content = document.getElementById('event-detail-content');
            
            title.textContent = evento.titulo;
            
            const fechaInicio = formatEventDate(evento.fecha);
            const fechaFin = evento.fechaFin ? formatEventDate(evento.fechaFin) : null;
            const fechaDisplay = fechaFin ? `${fechaInicio} - ${fechaFin}` : fechaInicio;
            
            const categoryColors = {
                'cultural': 'bg-purple-100 text-purple-800',
                'deportivo': 'bg-green-100 text-green-800',
                'religioso': 'bg-blue-100 text-blue-800',
                'gastronomico': 'bg-orange-100 text-orange-800',
                'educativo': 'bg-indigo-100 text-indigo-800',
                'familiar': 'bg-pink-100 text-pink-800'
            };
            
            content.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Event Information -->
                    <div>
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${categoryColors[evento.categoria] || 'bg-gray-100 text-gray-800'}">
                                    ${evento.categoria.charAt(0).toUpperCase() + evento.categoria.slice(1)}
                                </span>
                                ${evento.destacado ? '<span class="bg-yellow-100 text-yellow-800 text-sm px-3 py-1 rounded-full font-medium">Destacado</span>' : ''}
                            </div>
                            <p class="text-gray-600 leading-relaxed">${evento.descripcion}</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <div class="bg-indigo-100 p-2 rounded-lg mr-4">
                                    <i class="fas fa-calendar text-indigo-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${fechaDisplay}</div>
                                    <div class="text-sm text-gray-500">${evento.hora}</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center">
                                <div class="bg-indigo-100 p-2 rounded-lg mr-4">
                                    <i class="fas fa-map-marker-alt text-indigo-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${evento.lugar}</div>
                                    ${evento.colonia ? `<div class="text-sm text-gray-500">${evento.colonia}</div>` : ''}
                                </div>
                            </div>
                            
                            <div class="flex items-center">
                                <div class="bg-indigo-100 p-2 rounded-lg mr-4">
                                    <i class="fas fa-users text-indigo-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${evento.organizador}</div>
                                    <div class="text-sm text-gray-500">Organizador</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center">
                                <div class="bg-indigo-100 p-2 rounded-lg mr-4">
                                    <i class="fas fa-phone text-indigo-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${evento.contacto}</div>
                                    <div class="text-sm text-gray-500">Informes</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center">
                                <div class="bg-indigo-100 p-2 rounded-lg mr-4">
                                    <i class="fas fa-ticket-alt text-indigo-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${evento.precio}</div>
                                    <div class="text-sm text-gray-500">Precio</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-8 flex space-x-3">
                            <button onclick="editEvent(${evento.id}); closeEventDetail();" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition duration-200 flex items-center">
                                <i class="fas fa-edit mr-2"></i>
                                Editar Evento
                            </button>
                            <button onclick="deleteEvent(${evento.id}); closeEventDetail();" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition duration-200 flex items-center">
                                <i class="fas fa-trash mr-2"></i>
                                Eliminar
                            </button>
                        </div>
                    </div>
                    
                    <!-- Event Photos -->
                    <div>
                        <h4 class="text-lg font-bold text-gray-800 mb-4">Galería de Fotos</h4>
                        ${evento.fotos && evento.fotos.length > 0 ? `
                            <div class="space-y-4">
                                <div class="aspect-video bg-gray-100 rounded-lg overflow-hidden">
                                    <img id="main-event-image" src="${evento.fotos[0]}" alt="${evento.titulo}" class="w-full h-full object-cover">
                                </div>
                                ${evento.fotos.length > 1 ? `
                                    <div class="grid grid-cols-4 gap-2">
                                        ${evento.fotos.map((foto, index) => `
                                            <img src="${foto}" alt="${evento.titulo} ${index + 1}" 
                                                 class="aspect-square object-cover rounded cursor-pointer border-2 ${index === 0 ? 'border-indigo-500' : 'border-gray-200'} hover:border-indigo-400 transition duration-200"
                                                 onclick="changeEventMainImage('${foto}', ${index})">
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                        ` : `
                            <div class="aspect-video bg-gray-100 rounded-lg flex items-center justify-center">
                                <div class="text-center">
                                    <i class="fas fa-image text-gray-400 text-4xl mb-2"></i>
                                    <p class="text-gray-500">No hay fotos disponibles</p>
                                </div>
                            </div>
                        `}
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function changeEventMainImage(imageSrc, index) {
            const mainImage = document.getElementById('main-event-image');
            const thumbnails = document.querySelectorAll('#event-detail-content img[onclick*="changeEventMainImage"]');
            
            mainImage.src = imageSrc;
            
            // Update thumbnail borders
            thumbnails.forEach((thumb, i) => {
                if (i === index) {
                    thumb.classList.remove('border-gray-200');
                    thumb.classList.add('border-indigo-500');
                } else {
                    thumb.classList.remove('border-indigo-500');
                    thumb.classList.add('border-gray-200');
                }
            });
        }

        function closeEventDetail() {
            document.getElementById('event-detail-modal').classList.add('hidden');
        }

        function editEvent(id) {
            currentEditType = 'eventos';
            currentEditId = id;
            
            const evento = eventos.find(e => e.id === id);
            if (!evento) return;
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const submitBtn = document.getElementById('submit-btn');
            
            title.textContent = 'Editar Evento';
            submitBtn.textContent = 'Actualizar';
            submitBtn.className = 'px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition duration-200';
            
            renderFormFields('eventos');
            
            // Fill form with existing data
            setTimeout(() => {
                document.getElementById('titulo').value = evento.titulo;
                document.getElementById('descripcion').value = evento.descripcion;
                document.getElementById('fecha').value = evento.fecha;
                document.getElementById('fechaFin').value = evento.fechaFin || '';
                document.getElementById('hora').value = evento.hora;
                document.getElementById('lugar').value = evento.lugar;
                document.getElementById('colonia').value = evento.colonia || '';
                document.getElementById('organizador').value = evento.organizador;
                document.getElementById('contacto').value = evento.contacto;
                document.getElementById('precio').value = evento.precio;
                document.getElementById('categoria').value = evento.categoria;
                document.getElementById('destacado').checked = evento.destacado;
                
                // Show existing photos
                if (evento.fotos && evento.fotos.length > 0) {
                    const previewContainer = document.getElementById('image-preview');
                    previewContainer.innerHTML = evento.fotos.map((foto, index) => `
                        <div class="relative">
                            <img src="${foto}" alt="Foto ${index + 1}" class="w-full h-20 object-cover rounded border">
                            <div class="absolute top-1 right-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded">
                                ${index + 1}
                            </div>
                        </div>
                    `).join('');
                }
            }, 100);
            
            modal.classList.remove('hidden');
        }

        function deleteEvent(id) {
            if (confirm('¿Estás seguro de que deseas eliminar este evento?')) {
                const index = eventos.findIndex(e => e.id === id);
                if (index !== -1) {
                    eventos.splice(index, 1);
                    renderAllSections();
                }
            }
        }

        // ==========================================
        // TRÁMITES MANAGEMENT FUNCTIONS
        // ==========================================

        function addRequirement() {
            const container = document.getElementById('requisitos-container');
            const newRequirement = document.createElement('div');
            newRequirement.className = 'flex items-center space-x-2';
            newRequirement.innerHTML = `
                <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Ej. Identificación oficial vigente">
                <button type="button" onclick="removeRequirement(this)" class="text-red-600 hover:text-red-700 p-2">
                    <i class="fas fa-times"></i>
                </button>
            `;
            container.appendChild(newRequirement);
        }

        function removeRequirement(button) {
            const container = document.getElementById('requisitos-container');
            if (container.children.length > 1) {
                button.parentElement.remove();
            }
        }

        function addProcedureStep() {
            const container = document.getElementById('procedimiento-container');
            const stepNumber = container.children.length + 1;
            const newStep = document.createElement('div');
            newStep.className = 'flex items-center space-x-2';
            newStep.innerHTML = `
                <span class="bg-teal-100 text-teal-800 px-2 py-1 rounded text-sm font-medium">${stepNumber}</span>
                <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Ej. Presentarse en la oficina con documentos">
                <button type="button" onclick="removeProcedureStep(this)" class="text-red-600 hover:text-red-700 p-2">
                    <i class="fas fa-times"></i>
                </button>
            `;
            container.appendChild(newStep);
        }

        function removeProcedureStep(button) {
            const container = document.getElementById('procedimiento-container');
            if (container.children.length > 1) {
                button.parentElement.remove();
                // Renumber steps
                Array.from(container.children).forEach((step, index) => {
                    const numberSpan = step.querySelector('span');
                    numberSpan.textContent = index + 1;
                });
            }
        }

        function saveTramite() {
            // Get basic form data
            const formData = {
                titulo: document.getElementById('titulo').value,
                descripcion: document.getElementById('descripcion').value,
                categoria: document.getElementById('categoria').value,
                costo: document.getElementById('costo').value,
                tiempo: document.getElementById('tiempo').value,
                ubicacion: document.getElementById('ubicacion').value,
                horario: document.getElementById('horario').value,
                descripcionLarga: document.getElementById('descripcionLarga').value,
                icono: document.getElementById('icono').value,
                destacado: document.getElementById('destacado').checked
            };

            // Get category name
            const categorySelect = document.getElementById('categoria');
            const selectedOption = categorySelect.options[categorySelect.selectedIndex];
            formData.categoriaNombre = selectedOption.textContent;

            // Get requirements
            const requirementInputs = document.querySelectorAll('#requisitos-container input');
            formData.requisitos = Array.from(requirementInputs)
                .map(input => input.value.trim())
                .filter(value => value !== '');

            // Get procedure steps
            const procedureInputs = document.querySelectorAll('#procedimiento-container input');
            formData.procedimiento = Array.from(procedureInputs)
                .map(input => input.value.trim())
                .filter(value => value !== '');

            if (currentEditId) {
                // Update existing trámite
                const index = tramites.findIndex(item => item.id === currentEditId);
                if (index !== -1) {
                    tramites[index] = { ...tramites[index], ...formData };
                }
            } else {
                // Add new trámite
                const newId = (Math.max(...tramites.map(item => parseInt(item.id))) + 1).toString();
                tramites.push({ id: newId, ...formData });
            }

            renderAllSections();
            closeModal();
        }

        function viewTramiteDetail(id) {
            const tramite = tramites.find(t => t.id === id);
            if (!tramite) return;

            const modal = document.getElementById('tramite-detail-modal');
            const title = document.getElementById('tramite-detail-title');
            const content = document.getElementById('tramite-detail-content');

            title.textContent = tramite.titulo;

            const categoryColors = {
                'identificacion': 'bg-blue-100 text-blue-800',
                'apoyos': 'bg-green-100 text-green-800',
                'salud': 'bg-red-100 text-red-800',
                'educacion': 'bg-purple-100 text-purple-800',
                'transito': 'bg-yellow-100 text-yellow-800',
                'comercio': 'bg-orange-100 text-orange-800',
                'construccion': 'bg-gray-100 text-gray-800',
                'otros': 'bg-pink-100 text-pink-800'
            };

            content.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Trámite Information -->
                    <div>
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${categoryColors[tramite.categoria] || 'bg-gray-100 text-gray-800'}">
                                    ${tramite.categoriaNombre}
                                </span>
                                ${tramite.destacado ? '<span class="bg-yellow-100 text-yellow-800 text-sm px-3 py-1 rounded-full font-medium">Destacado</span>' : ''}
                            </div>
                            <p class="text-gray-600 leading-relaxed mb-4">${tramite.descripcion}</p>
                            ${tramite.descripcionLarga ? `<p class="text-sm text-gray-500 leading-relaxed">${tramite.descripcionLarga}</p>` : ''}
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <div class="bg-teal-100 p-2 rounded-lg mr-4">
                                    <i class="fas fa-dollar-sign text-teal-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${tramite.costo}</div>
                                    <div class="text-sm text-gray-500">Costo</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center">
                                <div class="bg-teal-100 p-2 rounded-lg mr-4">
                                    <i class="fas fa-clock text-teal-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${tramite.tiempo}</div>
                                    <div class="text-sm text-gray-500">Tiempo de resolución</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center">
                                <div class="bg-teal-100 p-2 rounded-lg mr-4">
                                    <i class="fas fa-map-marker-alt text-teal-600"></i>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${tramite.ubicacion}</div>
                                    <div class="text-sm text-gray-500">${tramite.horario}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-8 flex space-x-3">
                            <button onclick="editTramite('${tramite.id}'); closeTramiteDetail();" class="bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition duration-200 flex items-center">
                                <i class="fas fa-edit mr-2"></i>
                                Editar Trámite
                            </button>
                            <button onclick="deleteTramite('${tramite.id}'); closeTramiteDetail();" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition duration-200 flex items-center">
                                <i class="fas fa-trash mr-2"></i>
                                Eliminar
                            </button>
                        </div>
                    </div>
                    
                    <!-- Requirements and Procedure -->
                    <div>
                        <div class="mb-8">
                            <h4 class="text-lg font-bold text-gray-800 mb-4">Requisitos</h4>
                            <ul class="space-y-2">
                                ${tramite.requisitos.map((req, index) => `
                                    <li class="flex items-start">
                                        <span class="bg-teal-100 text-teal-800 text-xs px-2 py-1 rounded-full mr-3 mt-0.5 font-medium">${index + 1}</span>
                                        <span class="text-sm text-gray-700">${req}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-4">Procedimiento</h4>
                            <ol class="space-y-3">
                                ${tramite.procedimiento.map((paso, index) => `
                                    <li class="flex items-start">
                                        <span class="bg-teal-600 text-white text-sm px-3 py-1 rounded-full mr-3 mt-0.5 font-medium">${index + 1}</span>
                                        <span class="text-sm text-gray-700 leading-relaxed">${paso}</span>
                                    </li>
                                `).join('')}
                            </ol>
                        </div>
                    </div>
                </div>
            `;

            modal.classList.remove('hidden');
        }

        function closeTramiteDetail() {
            document.getElementById('tramite-detail-modal').classList.add('hidden');
        }

        function editTramite(id) {
            currentEditType = 'tramites';
            currentEditId = id;

            const tramite = tramites.find(t => t.id === id);
            if (!tramite) return;

            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const submitBtn = document.getElementById('submit-btn');

            title.textContent = 'Editar Trámite';
            submitBtn.textContent = 'Actualizar';
            submitBtn.className = 'px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition duration-200';

            renderFormFields('tramites');

            // Fill form with existing data
            setTimeout(() => {
                document.getElementById('titulo').value = tramite.titulo;
                document.getElementById('descripcion').value = tramite.descripcion;
                document.getElementById('categoria').value = tramite.categoria;
                document.getElementById('costo').value = tramite.costo;
                document.getElementById('tiempo').value = tramite.tiempo;
                document.getElementById('ubicacion').value = tramite.ubicacion;
                document.getElementById('horario').value = tramite.horario;
                document.getElementById('descripcionLarga').value = tramite.descripcionLarga || '';
                document.getElementById('icono').value = tramite.icono;
                document.getElementById('destacado').checked = tramite.destacado;

                // Fill requirements
                const reqContainer = document.getElementById('requisitos-container');
                reqContainer.innerHTML = '';
                tramite.requisitos.forEach((req, index) => {
                    const reqDiv = document.createElement('div');
                    reqDiv.className = 'flex items-center space-x-2';
                    reqDiv.innerHTML = `
                        <input type="text" value="${req}" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <button type="button" onclick="removeRequirement(this)" class="text-red-600 hover:text-red-700 p-2">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    reqContainer.appendChild(reqDiv);
                });

                // Fill procedure steps
                const procContainer = document.getElementById('procedimiento-container');
                procContainer.innerHTML = '';
                tramite.procedimiento.forEach((paso, index) => {
                    const stepDiv = document.createElement('div');
                    stepDiv.className = 'flex items-center space-x-2';
                    stepDiv.innerHTML = `
                        <span class="bg-teal-100 text-teal-800 px-2 py-1 rounded text-sm font-medium">${index + 1}</span>
                        <input type="text" value="${paso}" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <button type="button" onclick="removeProcedureStep(this)" class="text-red-600 hover:text-red-700 p-2">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    procContainer.appendChild(stepDiv);
                });
            }, 100);

            modal.classList.remove('hidden');
        }

        function deleteTramite(id) {
            if (confirm('¿Estás seguro de que deseas eliminar este trámite?')) {
                const index = tramites.findIndex(t => t.id === id);
                if (index !== -1) {
                    tramites.splice(index, 1);
                    renderAllSections();
                }
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97c2345d125ac677',t:'MTc1NzM3MzkyMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
